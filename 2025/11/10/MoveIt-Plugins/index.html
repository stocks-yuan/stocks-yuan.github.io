<!DOCTYPE html>
<html lang="zh-CN">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="MoveIt_Plugins" />
    <meta name="hexo-theme-A4" content="v2.0.0" />
    <link rel="alternate icon" type="image/webp" href="/img/favicon.jpg">
    <title>Stocks</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--æ³¨æ„ï¼šé¦–é¡µæ—¢ä¸æ˜¯postä¹Ÿä¸æ˜¯page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--è¿”å›é¡¶éƒ¨css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--ç›®å½•-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
        
<link rel="stylesheet" href="/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/css/lightgallery-bundle.min.css">


   
        
<link rel="stylesheet" href="/css/custom.css">

    
    <link rel='stylesheet' href='https://chinese-fonts-cdn.deno.dev/packages/lxgwwenkai/dist/LXGWWenKai-Regular/result.css' /> 
<meta name="generator" content="Hexo 8.1.1">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>
    
    

    
    



    
        <style>
            .paper-main{
                max-width:  1200px;
            }
        </style>

    
    




    
    
    <style>
        body {
            background-image: url(/img/bg3.png);
            background-attachment: fixed;  /* èƒŒæ™¯å›ºå®šï¼Œä¸éšé¡µé¢æ»šåŠ¨ */
            background-repeat: no-repeat;  /* é˜²æ­¢èƒŒæ™¯å›¾ç‰‡é‡å¤ */
            background-size: cover;       /* èƒŒæ™¯è‡ªé€‚åº”å¤§å°ï¼Œè¦†ç›–æ•´ä¸ªèƒŒæ™¯ */
            background-position: center;   /* èƒŒæ™¯å±…ä¸­æ˜¾ç¤º */
        }
        .paper {
            background-image: url(/img/bg3.png);
            background-attachment: fixed;  /* èƒŒæ™¯å›ºå®šï¼Œä¸éšé¡µé¢æ»šåŠ¨ */
            background-repeat: no-repeat;  /* é˜²æ­¢èƒŒæ™¯å›¾ç‰‡é‡å¤ */
            background-size: cover;       /* èƒŒæ™¯è‡ªé€‚åº”å¤§å°ï¼Œè¦†ç›–æ•´ä¸ªèƒŒæ™¯ */
            background-position: center;   /* èƒŒæ™¯å±…ä¸­æ˜¾ç¤º */
        }  
    </style>



    <body>
        <script src="/js/darkmode-js.min.js"></script>
        
        
            
                <div class="left-toc-container">
                    <nav id="toc" class="bs-docs-sidebar"></nav>
                </div>
            
        
        <div class="paper">

            

            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <style>
            .header-img {
                width: 56px;
                height: auto;
                object-fit: cover; /* ä¿æŒå›¾ç‰‡æ¯”ä¾‹ */
                transition: transform 0.3s ease-in-out; 
                border-radius: 50%; 
            }
            
        </style>
        <img 
            alt="^-^" 
            cache-control="max-age=86400" 
            class="header-img" 
            src="/img/favicon.jpg" 
        />
        <div class="header-content">
            <a class="logo" href="/">Stocks</a> 
            <span class="description">åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ | æœºå™¨äººç®—æ³•</span> 
        </div>
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">ğŸ  é¦–é¡µ</a></li>
            
        
            
                <li><a href="/list/">ğŸ“æ–‡ç« </a></li>
            
        
            
                <li><a href="/tags/">ğŸ“Œæ ‡ç­¾</a></li>
            
        
            
                <li><a href="/categories/">ğŸ“åˆ†ç±»</a></li>
            
        
            
                <li><a href="/about/">ğŸŒŸå…³äº</a></li>
            
        
    </ul>
</div>

                    
                    

                    
                    

                    <!--è¯´æ˜æ˜¯æ–‡ç« posté¡µé¢-->
                    
                        <div class="post-main">
    

    
        
            
                <div class="post-main-title" style="text-align: center;">
                    MoveIt_Plugins
                </div>
            
        
      
    

    

        
            <div class="post-head-meta-center">
        
                
                    <span>æœ€è¿‘æ›´æ–°ï¼š2025-11-10</span> 
                
                
                    
                        &nbsp; | &nbsp;
                    
                     <span>å­—æ•°æ€»è®¡ï¼š2.3k</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span>é˜…è¯»ä¼°æ—¶ï¼š10åˆ†é’Ÿ</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span id="busuanzi_container_page_pv">
                        é˜…è¯»é‡ï¼š<span id="busuanzi_value_page_pv"></span>æ¬¡
                    </span>
                
            </div>
    

    <div class="post-md">
        
        <div class=".article-gallery"><h2 id="moveit-plugin-interfaces">1. MoveIt Plugin Interfaces</h2>
<p>MoveIt2æ¶‰åŠåˆ°å¤šä¸ªä¸åŒçš„é¢†åŸŸï¼Œå¹¶æä¾›äº†è®¸å¤šæ¥å£ï¼Œä»¥ä¾¿è®©ç”¨æˆ·å¯ä»¥è¦†ç›–MoveIt2æ¡†æ¶çš„ä¸åŒéƒ¨åˆ†å’Œå®ç°æ–°çš„æ¦‚å¿µï¼Œè€Œæ— éœ€è§¦ç¢°è¯¥æ¡†æ¶çš„æ ¸å¿ƒã€‚ä¸‹é¢åˆ—å‡ºäº†MoveIt2ä¸­ä¸åŒç±»å‹çš„æ’ä»¶ï¼Œå¹¶æ¦‚è¿°äº†è¿™äº›æ’ä»¶åœ¨è¯¥æ¡†æ¶å†…çš„ç”¨é€”ã€‚</p>
<p><a target="_blank" rel="noopener" href="http://images.ncnynl.com/ros/2021/ros2-movelt2-12.jpg" title="è¯·è¾“å…¥å›¾ç‰‡æè¿°" class="gallery-item" style="box-shadow: none;"> <img src="http://images.ncnynl.com/ros/2021/ros2-movelt2-12.jpg" alt="è¯·è¾“å…¥å›¾ç‰‡æè¿°" style="zoom: 80%;"></a></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://moveit.ai/documentation/plugins/#movegroupcapability">move_group::MoveGroupCapability</a></li>
<li><a target="_blank" rel="noopener" href="https://moveit.ai/documentation/plugins/#kinematicsbase">kinematics::KinematicsBase</a></li>
<li><a target="_blank" rel="noopener" href="https://moveit.ai/documentation/plugins/#plannermanager">planning_interface::PlannerManager</a></li>
<li><a target="_blank" rel="noopener" href="https://moveit.ai/documentation/plugins/#planningrequestadapter">planning_request_adapter::PlanningRequestAdapter</a></li>
<li><a target="_blank" rel="noopener" href="https://moveit.ai/documentation/plugins/#moveitcontrollermanager">moveit_controller_manager::MoveItControllerManager</a></li>
<li><a target="_blank" rel="noopener" href="https://moveit.ai/documentation/plugins/#controllerhandleallocator">moveit_ros_control_interface::ControllerHandleAllocator</a></li>
<li><a target="_blank" rel="noopener" href="https://moveit.ai/documentation/plugins/#moveitsensormanager">moveit_sensor_manager::MoveItSensorManager</a></li>
<li><a target="_blank" rel="noopener" href="https://moveit.ai/documentation/plugins/#constraintsamplerallocator">constraint_samplers::ConstraintSamplerAllocator</a></li>
<li><a target="_blank" rel="noopener" href="https://moveit.ai/documentation/plugins/#collisionplugin">collision_detection::CollisionPlugin</a></li>
<li><a target="_blank" rel="noopener" href="https://moveit.ai/documentation/plugins/#occupancymapupdater">occupancy_map_monitor::OccupancyMapUpdater</a></li>
</ul>
<p>Movelté€šè¿‡æ’ä»¶æ¥å£ä¸è¿åŠ¨è§„åˆ’å™¨ä¸€èµ·å·¥ä½œã€‚è¿™å…è®¸Moveltä¸æ¥è‡ªå¤šä¸ªåº“çš„ä¸åŒè¿åŠ¨è§„åˆ’å™¨è¿›è¡Œé€šä¿¡å’Œä½¿ç”¨ï¼Œä½¿Moveltæ˜“äºæ‰©å±•ã€‚Motion Planner ä¸move_groupçš„æ¥å£æ˜¯é€šè¿‡ ROS actionæˆ–serviceï¼ˆç”±move_group_nodeæä¾›ï¼‰å®ç°çš„ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://oss.guyuehome.com/Uploads/wp/2020/11/3-26.png" title="img" class="gallery-item" style="box-shadow: none;"> <img src="https://oss.guyuehome.com/Uploads/wp/2020/11/3-26.png" alt="img" style="zoom: 50%;"></a></p>
<h2 id="creating-motion-planner-plugin">2. Creating Motion Planner Plugin</h2>
<p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å±•ç¤ºå¦‚ä½•å°†ä¸€ä¸ªæ–°çš„è¿åŠ¨è§„åˆ’å™¨ä½œä¸ºæ’ä»¶æ·»åŠ åˆ° MoveIt ä¸­ã€‚MoveIt ä¸­çš„åŸºç±»æ˜¯<code>planning_interface</code>ï¼Œä»»ä½•æ–°çš„è§„åˆ’å™¨æ’ä»¶éƒ½åº”è¯¥ç»§æ‰¿è‡ªè¯¥åŸºç±»ã€‚ä¸ºäº†æ¼”ç¤ºç›®çš„ï¼Œåˆ›å»ºäº†ä¸€ä¸ªçº¿æ€§æ’å€¼è§„åˆ’å™¨ï¼ˆlerpï¼‰ï¼Œå®ƒåœ¨å…³èŠ‚ç©ºé—´ä¸­è§„åˆ’ä¸¤ä¸ªçŠ¶æ€ä¹‹é—´çš„è¿åŠ¨ã€‚è¿™ä¸ªè§„åˆ’å™¨å¯ä»¥ä½œä¸ºæ·»åŠ ä»»ä½•æ–°è§„åˆ’å™¨çš„èµ·ç‚¹ï¼Œå› ä¸ºå®ƒåŒ…å«äº†å¿…è¦çš„åŸºç¡€çŸ¥è¯†ã€‚æœ¬æ•™ç¨‹ä¸­æ¶‰åŠçš„æœ€ç»ˆæºæ–‡ä»¶å¯åœ¨<a target="_blank" rel="noopener" href="https://github.com/moveit/moveit2_tutorials/tree/main/doc/examples/creating_moveit_plugins/lerp_motion_planner/src">æ­¤å¤„</a>æ‰¾åˆ°ã€‚</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ CMakeLists.txt</span><br><span class="line">â”œâ”€â”€ include</span><br><span class="line">â”‚   â””â”€â”€ lerp_interface</span><br><span class="line">â”‚       â”œâ”€â”€ lerp_interface.h	#lerp_interfaceç±»</span><br><span class="line">â”‚       â””â”€â”€ lerp_planning_context.h		#lerp_planning_contextç±»</span><br><span class="line">â”œâ”€â”€ launch</span><br><span class="line">â”‚   â””â”€â”€ lerp_example.launch</span><br><span class="line">â”œâ”€â”€ lerp_interface_plugin_description.xml	#æ’ä»¶æè¿° xml æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ lerp_planner.png</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">    â”œâ”€â”€ lerp_example.cpp	#åŠ è½½å’Œä½¿ç”¨åˆ›å»ºçš„ lerp è§„åˆ’å™¨</span><br><span class="line">    â”œâ”€â”€ lerp_interface.cpp	#è§„åˆ’ç®—æ³•å…¥å£ç‚¹(solveæ–¹æ³•å®ç°)</span><br><span class="line">    â”œâ”€â”€ lerp_planner_manager.cpp	#é‡å†™lerp_planner_managerç±»ä¸­æ–¹æ³•</span><br><span class="line">    â””â”€â”€ lerp_planning_context.cpp	#é‡å†™lerp_planning_contextç±»ä¸­æ–¹æ³•</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">5 directories, 10 files</span><br></pre></td></tr></tbody></table></figure>
<p>ä¸‹å›¾æ˜¾ç¤ºäº†<strong>åœ¨ MoveIt ä¸­æ·»åŠ æ–°è§„åˆ’å™¨çš„ç±»ä¹‹é—´å…³ç³»çš„ç®€è¦æ€»ä½“è§†å›¾ã€‚</strong></p>
<blockquote>
<p><strong>planning_interface.h</strong></p>
<ul>
<li><strong>PlannerConfigurationSettingsï¼š</strong>é…ç½®è¿åŠ¨è§„åˆ’æ’ä»¶ä¸­ç®—æ³•æ‰€éœ€è¦çš„å‚æ•°(å¯é€‰)</li>
<li><strong>PlanningContextï¼š</strong>è¿åŠ¨è§„åˆ’æ’ä»¶çš„è¿è¡Œä¸Šä¸‹æ–‡ï¼Œä¹Ÿå°±æ˜¯å…·ä½“è°ƒç”¨ç®—æ³•çš„ä½ç½®</li>
<li><strong>PlanningManagerï¼š</strong> è¿åŠ¨è§„åˆ’æ’ä»¶ç®¡ç†å™¨ï¼Œç”¨æ¥æ³¨å†Œæ–°åˆ›å»ºçš„è¿åŠ¨è§„åˆ’æ’ä»¶</li>
</ul>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://moveit.picknik.ai/humble/_images/lerp_planner.png" title="../../../_images/lerp_planner.png" class="gallery-item" style="box-shadow: none;"> <img src="https://moveit.picknik.ai/humble/_images/lerp_planner.png" alt="../../../_images/lerp_planner.png"></a></p>
<h3 id="åˆ›å»ºlerpplanplannermanagerç±»">1.åˆ›å»º<code>LERPPlanPlannerManager</code>ç±»</h3>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LERPPlannerManager</span> : <span class="keyword">public</span> planning_interface::PlannerManager</span><br></pre></td></tr></tbody></table></figure>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ <code>moveit_tutorials</code> åŒ…ä¸­åˆ›å»ºæ’ä»¶ç±»ã€‚è¦ä¸º lerp åˆ›å»ºæ’ä»¶ç±»ï¼Œè¯·åœ¨ src æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªåä¸º lerp_planner_manager.cpp çš„æ–‡ä»¶ã€‚<strong>åœ¨æ­¤æ–‡ä»¶ä¸­ï¼Œ LERPPlanPlannerManager è¦†ç›–äº† planning_interface ä¸­çš„ PlannerManager ç±»çš„å‡½æ•°</strong>ã€‚åœ¨æ­¤æ–‡ä»¶çš„æœ«å°¾ï¼Œæˆ‘ä»¬éœ€è¦å°† <code>LERPPlanPlannerManager</code>ç±»æ³¨å†Œä¸ºæ’ä»¶ï¼Œè¿™æ˜¯é€šè¿‡ class_loader ä¸­çš„ <code>CLASS_LOADER_REGISTER_CLASS</code>å®å®Œæˆçš„ã€‚</p>
<h4 id="lerp_planner_manager.cpp">lerp_planner_manager.cpp:</h4>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;moveit/planning_interface/planning_interface.h&gt;</span> <span class="comment">// åŒ…å«MoveIt!è§„åˆ’æ¥å£å¤´æ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;moveit/planning_interface/planning_response.h&gt;</span> <span class="comment">// åŒ…å«MoveIt!è§„åˆ’å“åº”å¤´æ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;moveit/planning_scene/planning_scene.h&gt;</span> <span class="comment">// åŒ…å«MoveIt!è§„åˆ’åœºæ™¯å¤´æ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;moveit/collision_detection_fcl/collision_detector_allocator_fcl.h&gt;</span> <span class="comment">// åŒ…å«FCLç¢°æ’æ£€æµ‹å™¨åˆ†é…å™¨å¤´æ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;class_loader/class_loader.hpp&gt;</span> <span class="comment">// åŒ…å«ç±»åŠ è½½å™¨å¤´æ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"lerp_interface/lerp_planning_context.h"</span> <span class="comment">// åŒ…å«LERPè§„åˆ’ä¸Šä¸‹æ–‡å¤´æ–‡ä»¶</span></span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> lerp_interface <span class="comment">// å®šä¹‰å‘½åç©ºé—´lerp_interface</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LERPPlannerManager</span> : <span class="keyword">public</span> planning_interface::PlannerManager <span class="comment">// å®šä¹‰LERPPlannerManagerç±»ï¼Œç»§æ‰¿è‡ªPlannerManager</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">LERPPlannerManager</span>() : planning_interface::<span class="built_in">PlannerManager</span>() <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">  {</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="type">bool</span> <span class="title">initialize</span><span class="params">(<span class="type">const</span> moveit::core::RobotModelConstPtr&amp; model, <span class="type">const</span> std::string&amp; <span class="comment">/*ns*/</span>)</span> <span class="keyword">override</span> <span class="comment">// åˆå§‹åŒ–å‡½æ•°</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> std::string&amp; gpName : model-&gt;<span class="built_in">getJointModelGroupNames</span>()) <span class="comment">// éå†æœºå™¨äººæ¨¡å‹çš„å…³èŠ‚ç»„åç§°</span></span><br><span class="line">    {</span><br><span class="line">      std::cout &lt;&lt; <span class="string">"group name "</span> &lt;&lt; gpName &lt;&lt; std::endl &lt;&lt; <span class="string">"robot model  "</span> &lt;&lt; model-&gt;<span class="built_in">getName</span>() &lt;&lt; std::endl; <span class="comment">// è¾“å‡ºç»„åç§°å’Œæœºå™¨äººæ¨¡å‹åç§°</span></span><br><span class="line">      planning_contexts_[gpName] =</span><br><span class="line">          <span class="built_in">LERPPlanningContextPtr</span>(<span class="keyword">new</span> <span class="built_in">LERPPlanningContext</span>(<span class="string">"lerp_planning_context"</span>, gpName, model)); <span class="comment">// åˆ›å»ºLERPè§„åˆ’ä¸Šä¸‹æ–‡å¹¶å­˜å‚¨åœ¨mapä¸­</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">// è¿”å›trueè¡¨ç¤ºåˆå§‹åŒ–æˆåŠŸ</span></span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="type">bool</span> <span class="title">canServiceRequest</span><span class="params">(<span class="type">const</span> moveit_msgs::MotionPlanRequest&amp; req)</span> <span class="type">const</span> <span class="keyword">override</span> <span class="comment">// æ£€æŸ¥æ˜¯å¦å¯ä»¥å¤„ç†è¯·æ±‚</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> req.trajectory_constraints.constraints.<span class="built_in">empty</span>(); <span class="comment">// å¦‚æœè½¨è¿¹çº¦æŸä¸ºç©ºï¼Œåˆ™è¿”å›true</span></span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">  <span class="function">std::string <span class="title">getDescription</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span> <span class="comment">// è·å–æè¿°</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"LERP"</span>; <span class="comment">// è¿”å›æè¿°å­—ç¬¦ä¸²</span></span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">getPlanningAlgorithms</span><span class="params">(std::vector&lt;std::string&gt;&amp; algs)</span> <span class="type">const</span> <span class="keyword">override</span> <span class="comment">// è·å–è§„åˆ’ç®—æ³•</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    algs.<span class="built_in">clear</span>(); <span class="comment">// æ¸…ç©ºç®—æ³•åˆ—è¡¨</span></span><br><span class="line">    algs.<span class="built_in">push_back</span>(<span class="string">"lerp"</span>); <span class="comment">// æ·»åŠ LERPç®—æ³•</span></span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">  <span class="function">planning_interface::PlanningContextPtr <span class="title">getPlanningContext</span><span class="params">(<span class="type">const</span> planning_scene::PlanningSceneConstPtr&amp; planning_scene,</span></span></span><br><span class="line"><span class="params"><span class="function">                                                            <span class="type">const</span> planning_interface::MotionPlanRequest&amp; req,</span></span></span><br><span class="line"><span class="params"><span class="function">                                                            moveit_msgs::MoveItErrorCodes&amp; error_code)</span> <span class="type">const</span> <span class="keyword">override</span> <span class="comment">// è·å–è§„åˆ’ä¸Šä¸‹æ–‡</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    error_code.val = moveit_msgs::MoveItErrorCodes::SUCCESS; <span class="comment">// è®¾ç½®é”™è¯¯ç ä¸ºæˆåŠŸ</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (req.group_name.<span class="built_in">empty</span>()) <span class="comment">// å¦‚æœè¯·æ±‚çš„ç»„åç§°ä¸ºç©º</span></span><br><span class="line">    {</span><br><span class="line">      <span class="built_in">ROS_ERROR</span>(<span class="string">"No group specified to plan for"</span>); <span class="comment">// è¾“å‡ºé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">      error_code.val = moveit_msgs::MoveItErrorCodes::INVALID_GROUP_NAME; <span class="comment">// è®¾ç½®é”™è¯¯ç ä¸ºæ— æ•ˆç»„åç§°</span></span><br><span class="line">      <span class="keyword">return</span> planning_interface::<span class="built_in">PlanningContextPtr</span>(); <span class="comment">// è¿”å›ç©ºæŒ‡é’ˆ</span></span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (!planning_scene) <span class="comment">// å¦‚æœè§„åˆ’åœºæ™¯ä¸ºç©º</span></span><br><span class="line">    {</span><br><span class="line">      <span class="built_in">ROS_ERROR</span>(<span class="string">"No planning scene supplied as input"</span>); <span class="comment">// è¾“å‡ºé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">      error_code.val = moveit_msgs::MoveItErrorCodes::FAILURE; <span class="comment">// è®¾ç½®é”™è¯¯ç ä¸ºå¤±è´¥</span></span><br><span class="line">      <span class="keyword">return</span> planning_interface::<span class="built_in">PlanningContextPtr</span>(); <span class="comment">// è¿”å›ç©ºæŒ‡é’ˆ</span></span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="comment">// åˆ›å»ºä½¿ç”¨æ··åˆç¢°æ’æ£€æµ‹å™¨çš„è§„åˆ’åœºæ™¯</span></span><br><span class="line">    planning_scene::PlanningScenePtr ps = planning_scene-&gt;<span class="built_in">diff</span>();</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="comment">// è®¾ç½®FCLä¸ºåˆ†é…å™¨</span></span><br><span class="line">    ps-&gt;<span class="built_in">setActiveCollisionDetector</span>(collision_detection::CollisionDetectorAllocatorFCL::<span class="built_in">create</span>(), <span class="literal">true</span>);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="comment">// æ£€ç´¢å¹¶é…ç½®ç°æœ‰ä¸Šä¸‹æ–‡</span></span><br><span class="line">    <span class="type">const</span> LERPPlanningContextPtr&amp; context = planning_contexts_.<span class="built_in">at</span>(req.group_name);</span><br><span class="line">    <span class="built_in">ROS_INFO_STREAM_NAMED</span>(<span class="string">"lerp_planner_manager"</span>, <span class="string">"===&gt;&gt;&gt; context is made "</span>); <span class="comment">// è¾“å‡ºä¿¡æ¯</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    context-&gt;<span class="built_in">setPlanningScene</span>(ps); <span class="comment">// è®¾ç½®è§„åˆ’åœºæ™¯</span></span><br><span class="line">    context-&gt;<span class="built_in">setMotionPlanRequest</span>(req); <span class="comment">// è®¾ç½®è¿åŠ¨è§„åˆ’è¯·æ±‚</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    error_code.val = moveit_msgs::MoveItErrorCodes::SUCCESS; <span class="comment">// è®¾ç½®é”™è¯¯ç ä¸ºæˆåŠŸ</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> context; <span class="comment">// è¿”å›ä¸Šä¸‹æ–‡</span></span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">  std::map&lt;std::string, LERPPlanningContextPtr&gt; planning_contexts_; <span class="comment">// è§„åˆ’ä¸Šä¸‹æ–‡map</span></span><br><span class="line">};</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">}  <span class="comment">// namespace lerp_interface</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">// æ³¨å†ŒLERPPlannerManagerç±»ä¸ºæ’ä»¶</span></span><br><span class="line"><span class="built_in">CLASS_LOADER_REGISTER_CLASS</span>(lerp_interface::LERPPlannerManager, planning_interface::PlannerManager);</span><br></pre></td></tr></tbody></table></figure>
<h3 id="åˆ›å»º-lerpplanningcontext-ç±»">2.åˆ›å»º <code>LERPPlanningContext</code> ç±»</h3>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LERPPlanningContext</span> : <span class="keyword">public</span> planning_interface::PlanningContext</span><br></pre></td></tr></tbody></table></figure>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬<strong>åˆ›å»º</strong> <strong><code>LERPPlanningContext</code> ç±»ï¼Œè¯¥ç±»å°†è¦†ç›– <code>PlanningContext</code> çš„åŠŸèƒ½ã€‚è¿™ä¸ªç±»å°†è¦†ç›– solve å‡½æ•°ï¼Œå…¶ä¸­è§„åˆ’å™¨è§£å†³é—®é¢˜å¹¶è¿”å›è§£å†³æ–¹æ¡ˆ</strong>ã€‚</p>
<h4 id="lerp_planning_context.h">lerp_planning_context.h</h4>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> LERP_PLANNING_CONTEXT_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LERP_PLANNING_CONTEXT_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;moveit/planning_interface/planning_interface.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">"lerp_interface/lerp_interface.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> lerp_interface</span><br><span class="line">{</span><br><span class="line"><span class="built_in">MOVEIT_CLASS_FORWARD</span>(LERPPlanningContext);</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LERPPlanningContext</span> : <span class="keyword">public</span> planning_interface::PlanningContext</span><br><span class="line">{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">LERPPlanningContext</span>(<span class="type">const</span> std::string&amp; name, <span class="type">const</span> std::string&amp; group, <span class="type">const</span> moveit::core::RobotModelConstPtr&amp; model);</span><br><span class="line">  ~<span class="built_in">LERPPlanningContext</span>() <span class="keyword">override</span></span><br><span class="line">  {</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="type">bool</span> <span class="title">solve</span><span class="params">(planning_interface::MotionPlanResponse&amp; res)</span> <span class="keyword">override</span></span>;</span><br><span class="line">  <span class="function"><span class="type">bool</span> <span class="title">solve</span><span class="params">(planning_interface::MotionPlanDetailedResponse&amp; res)</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="type">bool</span> <span class="title">terminate</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">clear</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  moveit::core::RobotModelConstPtr robot_model_;</span><br><span class="line">  moveit::core::RobotStatePtr robot_state_;</span><br><span class="line">  LERPInterfacePtr lerp_interface_;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">}  <span class="comment">// namespace lerp_interface</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span>  <span class="comment">// LERP_PLANNING_CONTEXT_H</span></span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="åˆ›å»ºlerpinterfaceç±»">3.åˆ›å»º<code>LERPInterface</code>ç±»</h3>
<p>ç”±äº solve å‡½æ•°çš„å®ç°å¯èƒ½éœ€è¦è®¸å¤šæ¥è‡ªè§„åˆ’å™¨ä»£ç åº“çš„ç±»ï¼Œå› æ­¤æ›´å…·å¯è¯»æ€§çš„æ˜¯åˆ›å»ºå¦ä¸€ä¸ªåä¸º <code>LERPInterface</code> çš„ç±»ï¼Œå…¶ä¸­å°†è¿›è¡Œè§„åˆ’å™¨ solve æ–¹æ³•çš„å®é™…å®ç°ã€‚<strong>å®é™…ä¸Šï¼Œè¿™ä¸ªç±»æ˜¯æ–°è¿åŠ¨è§„åˆ’ç®—æ³•çš„å…¥å£ç‚¹ã€‚</strong></p>
<h4 id="lerp_interface.h">lerp_interface.h</h4>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ros/ros.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;moveit/planning_interface/planning_interface.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> lerp_interface</span><br><span class="line">{</span><br><span class="line"><span class="built_in">MOVEIT_CLASS_FORWARD</span>(LERPInterface);</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LERPInterface</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">LERPInterface</span>(<span class="type">const</span> ros::NodeHandle&amp; nh = ros::<span class="built_in">NodeHandle</span>(<span class="string">"~"</span>));</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="type">bool</span> <span class="title">solve</span><span class="params">(<span class="type">const</span> planning_scene::PlanningSceneConstPtr&amp; planning_scene,</span></span></span><br><span class="line"><span class="params"><span class="function">             <span class="type">const</span> planning_interface::MotionPlanRequest&amp; req, moveit_msgs::MotionPlanDetailedResponse&amp; res)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">  ros::NodeHandle nh_;</span><br><span class="line">  std::string name_;</span><br><span class="line">  <span class="type">int</span> num_steps_;</span><br><span class="line">  <span class="type">int</span> dof_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">interpolate</span><span class="params">(<span class="type">const</span> std::vector&lt;std::string&gt;&amp; joint_names, moveit::core::RobotStatePtr&amp; robot_state,</span></span></span><br><span class="line"><span class="params"><span class="function">                   <span class="type">const</span> moveit::core::JointModelGroup* joint_model_group, <span class="type">const</span> std::vector&lt;<span class="type">double</span>&gt;&amp; start_joint_vals,</span></span></span><br><span class="line"><span class="params"><span class="function">                   <span class="type">const</span> std::vector&lt;<span class="type">double</span>&gt;&amp; goal_joint_vals, trajectory_msgs::JointTrajectory&amp; joint_trajectory)</span></span>;</span><br><span class="line">};</span><br><span class="line">}  <span class="comment">// namespace lerp_interface</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="plannerconfigurationsettings">4.PlannerConfigurationSettings</h3>
<p><code>PlannerConfigurationSettings</code> å¯ä»¥ç”¨æ¥ä¼ é€’ç‰¹å®šäºè§„åˆ’å™¨çš„å‚æ•°ã€‚å¦ä¸€ç§ä¼ é€’è¿™äº›å‚æ•°çš„æ–¹æ³•æ˜¯ä½¿ç”¨ ROS å‚æ•°æœåŠ¡å™¨ï¼Œè¯¥æœåŠ¡å™¨ä» yaml æ–‡ä»¶ä¸­è¯»å–ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œå¯¹äºæˆ‘ä»¬çš„ lerp è§„åˆ’å™¨ï¼Œæˆ‘ä»¬åœ¨ panda_moveit_config åŒ…ä¸­ä½¿ç”¨ <code>lerp_planning.yaml</code> ï¼Œè¯¥åŒ…ä»…åŒ…å«ä¸€ä¸ªå‚æ•° <code>num_steps</code> ï¼Œè¯¥å‚æ•°åœ¨æ¯æ¬¡è°ƒç”¨å…¶ solve å‡½æ•°æ—¶éƒ½ä¼šåŠ è½½åˆ° <code>lerp_interface</code> ä¸­ã€‚</p>
<h3 id="export-the-plugin">5.Export the plugin</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä½¿æ’ä»¶å¯ç”¨äº ROS å·¥å…·é“¾ã€‚ä¸ºæ­¤ï¼Œåº”åˆ›å»ºä¸€ä¸ªåŒ…å«ä»¥ä¸‹é€‰é¡¹çš„æ’ä»¶æè¿° xml æ–‡ä»¶ï¼ˆ <code>emptyplan_interface_plugin_description.xml</code> ï¼‰ï¼Œå…¶ä¸­åŒ…å« <code>library</code> æ ‡ç­¾ï¼š</p>
<h4 id="emptyplan_interface_plugin_description.xml">emptyplan_interface_plugin_description.xml:</h4>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;library path=<span class="string">"libmoveit_lerp_planner_plugin"</span>&gt;</span><br><span class="line">  &lt;<span class="keyword">class</span> name=<span class="string">"lerp_interface/LERPPlanner"</span> type=<span class="string">"lerp_interface::LERPPlannerManager"</span> base_class_type=<span class="string">"planning_interface::PlannerManager"</span>&gt;</span><br><span class="line">    &lt;description&gt;</span><br><span class="line">      The lerp motion planner plugin which interpolates between two given start <span class="keyword">and</span> goal joint state values.</span><br><span class="line">    &lt;/description&gt;</span><br><span class="line">  &lt;/<span class="keyword">class</span>&gt;</span><br><span class="line">&lt;/library&gt;</span><br></pre></td></tr></tbody></table></figure>
<h4 id="package.xml">package.xml:</h4>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">export</span>&gt;</span><br><span class="line">   &lt;moveit_core plugin=<span class="string">"${prefix}/doc/creating_moveit_plugins/lerp_motion_planner/lerp_interface_plugin_description.xml"</span>/&gt;</span><br><span class="line">&lt;/<span class="keyword">export</span>&gt;</span><br></pre></td></tr></tbody></table></figure>
<h3 id="check-the-plugin">6.Check the plugin</h3>
<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥éªŒè¯æ–°æ’ä»¶æ˜¯å¦å·²æ­£ç¡®åˆ›å»ºå’Œå¯¼å‡ºï¼š</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rospack plugins --attrib=plugin moveit_core</span><br></pre></td></tr></tbody></table></figure>
<p>ç»“æœåº”åŒ…å« <code>moveit_planners_lerp</code> ä»¥åŠæ’ä»¶æè¿° xml æ–‡ä»¶çš„åœ°å€ï¼š</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">moveit_tutorials &lt;ros_workspace&gt;/src/moveit_tutorials/creating_moveit_plugins/lerp_motion_planner/lerp_interface_plugin_description.xml</span><br></pre></td></tr></tbody></table></figure>
<h3 id="plugin-usage">7.Plugin usage</h3>
<p>åœ¨æœ¬å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†<strong>è§£é‡Šå¦‚ä½•åŠ è½½å’Œä½¿ç”¨æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ lerp è§„åˆ’å™¨ã€‚</strong>ä¸ºæ­¤ï¼Œåˆ›å»ºäº†ä¸€ä¸ªåä¸º <code>lerp_example.cpp</code> çš„ nodeã€‚</p>
<p>ç¬¬ä¸€æ­¥æ˜¯é€šè¿‡ä»¥ä¸‹ä»£ç è¡Œ<strong>è·å–ä¸è¯·æ±‚çš„è§„åˆ’ç»„ä»¥åŠè§„åˆ’åœºæ™¯ç›¸å…³çš„æœºå™¨äººçš„çŠ¶æ€å’Œå…³èŠ‚ç»„ï¼š</strong></p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">moveit::<span class="function">core::RobotStatePtr <span class="title">robot_state</span><span class="params">(<span class="keyword">new</span> moveit::core::RobotState(robot_model))</span></span>;</span><br><span class="line"><span class="type">const</span> moveit::core::JointModelGroup* joint_model_group = robot_state-&gt;<span class="built_in">getJointModelGroup</span>(PLANNING_GROUP);</span><br><span class="line"><span class="type">const</span> std::vector&lt;std::string&gt;&amp; joint_names = joint_model_group-&gt;<span class="built_in">getVariableNames</span>();</span><br><span class="line"><span class="function">planning_scene::PlanningScenePtr <span class="title">planning_scene</span><span class="params">(<span class="keyword">new</span> planning_scene::PlanningScene(robot_model))</span></span>;</span><br></pre></td></tr></tbody></table></figure>
<p>ä¸‹ä¸€æ­¥æ˜¯<strong>ä½¿ç”¨ pluginlib åŠ è½½è§„åˆ’å™¨ï¼Œå¹¶å°†å‚æ•° <code>planner_plugin_name</code> è®¾ç½®ä¸ºæˆ‘ä»¬åˆ›å»ºçš„å‚æ•°ï¼š</strong></p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">boost::scoped_ptr&lt;pluginlib::ClassLoader&lt;planning_interface::PlannerManager&gt;&gt; planner_plugin_loader;</span><br><span class="line">planning_interface::PlannerManagerPtr planner_instance;</span><br><span class="line">std::string planner_plugin_name =  <span class="string">"lerp_interface/LERPPlanner"</span>;</span><br><span class="line">node_handle.<span class="built_in">setParam</span>(<span class="string">"planning_plugin"</span>, planner_plugin_name);</span><br></pre></td></tr></tbody></table></figure>
<p>åŠ è½½è§„åˆ’å™¨åï¼Œæ˜¯æ—¶å€™ä¸ºè¿åŠ¨è§„åˆ’é—®é¢˜è®¾ç½®èµ·å§‹çŠ¶æ€å’Œç›®æ ‡çŠ¶æ€äº†ã€‚èµ·å§‹çŠ¶æ€æ˜¯æœºå™¨äººçš„å½“å‰çŠ¶æ€ï¼Œè®¾ç½®ä¸º <code>req.start_state</code> ã€‚å¦ä¸€æ–¹é¢ï¼Œç›®æ ‡çº¦æŸæ˜¯é€šè¿‡ä½¿ç”¨ç›®æ ‡çŠ¶æ€å’Œå…³èŠ‚æ¨¡å‹ç»„åˆ›å»º <code>moveit_msgs::Constraints</code> æ¥è®¾ç½®çš„ã€‚æ­¤çº¦æŸè¢«ä¼ é€’ç»™ <code>req.goal_constraint</code> ã€‚ä»¥ä¸‹ä»£ç æ˜¾ç¤ºäº†å¦‚ä½•æ‰§è¡Œè¿™äº›æ­¥éª¤ï¼š</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Get the joint values of the start state and set them in request.start_state</span></span><br><span class="line">std::vector&lt;<span class="type">double</span>&gt; start_joint_values;</span><br><span class="line">robot_state-&gt;<span class="built_in">copyJointGroupPositions</span>(joint_model_group, start_joint_values);</span><br><span class="line">req.start_state.joint_state.position = start_joint_values;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">// Goal constraint</span></span><br><span class="line">moveit::<span class="function">core::RobotState <span class="title">goal_state</span><span class="params">(robot_model)</span></span>;</span><br><span class="line">std::vector&lt;<span class="type">double</span>&gt; joint_values = { <span class="number">0.8</span>, <span class="number">0.7</span>, <span class="number">1</span>, <span class="number">1.3</span>, <span class="number">1.9</span>, <span class="number">2.2</span>, <span class="number">3</span> };</span><br><span class="line">goal_state.<span class="built_in">setJointGroupPositions</span>(joint_model_group, joint_values);</span><br><span class="line">moveit_msgs::Constraints joint_goal = kinematic_constraints::<span class="built_in">constructGoalConstraints</span>(goal_state, joint_model_group);</span><br><span class="line">req.goal_constraints.<span class="built_in">clear</span>();</span><br><span class="line">req.goal_constraints.<span class="built_in">push_back</span>(joint_goal);</span><br></pre></td></tr></tbody></table></figure>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»åŠ è½½äº†è§„åˆ’å™¨å¹¶ä¸ºè¿åŠ¨è§„åˆ’é—®é¢˜åˆ›å»ºäº†èµ·å§‹çŠ¶æ€å’Œç›®æ ‡çŠ¶æ€ï¼Œä½†æˆ‘ä»¬å°šæœªè§£å†³è¯¥é—®é¢˜ã€‚é€šè¿‡ç»™å®šçš„èµ·å§‹çŠ¶æ€å’Œç›®æ ‡çŠ¶æ€ä¿¡æ¯ï¼Œåœ¨å…³èŠ‚çŠ¶æ€ä¸‹è§£å†³è¿åŠ¨è§„åˆ’é—®é¢˜æ˜¯é€šè¿‡åˆ›å»ºä¸€ä¸ª <code>PlanningContext</code> å®ä¾‹å¹¶è°ƒç”¨å…¶ <code>solve</code> å‡½æ•°æ¥å®Œæˆçš„ã€‚è¯·è®°ä½ï¼Œä¼ é€’ç»™æ­¤ solve å‡½æ•°çš„å“åº”åº”ä¸º <code>planning_interface::MotionPlanResponse</code> ç±»å‹ï¼š</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">planning_interface::PlanningContextPtr context = planner_instance-&gt;<span class="built_in">getPlanningContext</span>(planning_scene, req, res.error_code_);</span><br></pre></td></tr></tbody></table></figure>
<p>æœ€åï¼Œè¦è¿è¡Œæ­¤èŠ‚ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¯åŠ¨æ–‡ä»¶å¤¹ä¸­ <code>roslaunch lerp_example.launch</code>ã€‚æ­¤å¯åŠ¨æ–‡ä»¶é€šè¿‡ä¼ é€’ <code>lerp</code> ä½œä¸ºè§„åˆ’å™¨çš„åç§°æ¥å¯åŠ¨åŒ… <code>panda_moveit_config</code> çš„ <code>demo.launch</code> ã€‚ç„¶åï¼Œ <code>lerp_example</code> è¢«å¯åŠ¨ï¼Œ <code>lerp_planning.yaml</code> è¢«åŠ è½½ä»¥å°† lerp ç‰¹å®šå‚æ•°è®¾ç½®åˆ° ROS å‚æ•°æœåŠ¡å™¨ã€‚</p>
</div>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2025-11-10</span>
            
                <span>è¯¥ç¯‡æ–‡ç« è¢« Stocks yuan</span>
            
            
             
                <span>å½’ä¸ºåˆ†ç±»:
                    
                    
                        <a href='/categories/ROS2/'>
                            ROS2
                        </a>
                    
                </span>
            
        
        </i>
    </div>
    <br>
    
    
        
            
    
            <div class="post-footer-pre-next">
                
                    <span>ä¸Šä¸€ç¯‡ï¼š<a href='/2025/11/10/Docker-build-once-run-anywhere/'>Docker(build once, run anywhere)</a></span>
                

                
                    <span class="post-footer-pre-next-last-span-right">ä¸‹ä¸€ç¯‡ï¼š<a href="/2025/11/10/Dual-URsim/">Dual_URsim</a>
                    </span>
                
            </div>
    
        
    

    
        

     
</div>




                    

                    <div class="footer">
    
        <span> 
            Â© 2002-2025 stocks-yuan 

            
                

            
        </span>
       
    
</div>



<!--è¿™æ˜¯æŒ‡ä¸€æ¡çº¿å¾€ä¸‹çš„å†…å®¹-->
<div class="footer-last">
    
            <span>ğŸŒŠçœ‹è¿‡å¤§æµ·çš„äººä¸ä¼šå¿˜è®°æµ·çš„å¹¿é˜”ğŸŒŠ</span>
            
                <span class="footer-last-span-right"><i>æœ¬ç«™ç”±<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>é©±åŠ¨ï½œä½¿ç”¨<a target="_blank" rel="noopener" href="https://github.com/HiNinoJay/hexo-theme-A4">Hexo-theme-A4</a>ä¸»é¢˜</i></span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--ç›®å½•-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--å›åˆ°é¡¶éƒ¨æŒ‰é’®-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery/lightgallery.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-autoplay.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-zoom.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-rotate.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-paper.umd.min.js"></script>




<script type="text/javascript">
     
    if (typeof lightGallery !== "undefined") {
        var options1 = {
            selector: '.gallery-item',
            plugins: [lgThumbnail, lgFullscreen, lgAutoplay, lgZoom, lgRotate, lgPager], // å¯ç”¨æ’ä»¶
            thumbnail: true,          // æ˜¾ç¤ºç¼©ç•¥å›¾
            zoom: true,               // å¯ç”¨ç¼©æ”¾åŠŸ
            rotate: true,             // å¯ç”¨æ—‹è½¬åŠŸèƒ½èƒ½
            autoplay: true,        // å¯ç”¨è‡ªåŠ¨æ’­æ”¾åŠŸèƒ½
            fullScreen: true,      // å¯ç”¨å…¨å±åŠŸèƒ½
            pager: false, //é¡µç ,
            zoomFromOrigin: true,   // ä»åŸå§‹ä½ç½®ç¼©æ”¾
            actualSize: true,       // å¯ç”¨æŸ¥çœ‹å®é™…å¤§å°çš„åŠŸèƒ½
            enableZoomAfter: 300,    // å»¶è¿Ÿç¼©æ”¾ï¼Œç¡®ä¿å›¾ç‰‡åŠ è½½å®Œæˆåå¯ç¼©æ”¾
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1); // ä¿®å¤é€‰æ‹©å™¨
    }
    
</script>


    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> 

                </div>
            
            
                <!-- å›åˆ°é¡¶éƒ¨çš„æŒ‰é’®-->
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- è¿”å›çš„æŒ‰é’®-->
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>
</html>
<script src="/js/emojiHandler.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        wrapEmojis('.paper');
    });
</script>
