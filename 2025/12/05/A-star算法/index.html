<!DOCTYPE html>
<html lang="zh-CN">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="åŸºäºæœç´¢çš„è·¯å¾„è§„åˆ’â€”â€”A*ç®—æ³•" />
    <meta name="hexo-theme-A4" content="v2.0.0" />
    <link rel="alternate icon" type="image/webp" href="/img/favicon.jpg">
    <title>Stocks</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--æ³¨æ„ï¼šé¦–é¡µæ—¢ä¸æ˜¯postä¹Ÿä¸æ˜¯page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--è¿”å›é¡¶éƒ¨css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--ç›®å½•-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
        
<link rel="stylesheet" href="/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/css/lightgallery-bundle.min.css">


   
        
<link rel="stylesheet" href="/css/custom.css">

    
    <link rel='stylesheet' href='https://chinese-fonts-cdn.deno.dev/packages/lxgwwenkai/dist/LXGWWenKai-Regular/result.css' /> 
<meta name="generator" content="Hexo 8.1.1">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>
    
    

    
    



    
        <style>
            .paper-main{
                max-width:  1200px;
            }
        </style>

    
    




    
    
    <style>
        body {
            background-image: url(/img/bg3.png);
            background-attachment: fixed;  /* èƒŒæ™¯å›ºå®šï¼Œä¸éšé¡µé¢æ»šåŠ¨ */
            background-repeat: no-repeat;  /* é˜²æ­¢èƒŒæ™¯å›¾ç‰‡é‡å¤ */
            background-size: cover;       /* èƒŒæ™¯è‡ªé€‚åº”å¤§å°ï¼Œè¦†ç›–æ•´ä¸ªèƒŒæ™¯ */
            background-position: center;   /* èƒŒæ™¯å±…ä¸­æ˜¾ç¤º */
        }
        .paper {
            background-image: url(/img/bg3.png);
            background-attachment: fixed;  /* èƒŒæ™¯å›ºå®šï¼Œä¸éšé¡µé¢æ»šåŠ¨ */
            background-repeat: no-repeat;  /* é˜²æ­¢èƒŒæ™¯å›¾ç‰‡é‡å¤ */
            background-size: cover;       /* èƒŒæ™¯è‡ªé€‚åº”å¤§å°ï¼Œè¦†ç›–æ•´ä¸ªèƒŒæ™¯ */
            background-position: center;   /* èƒŒæ™¯å±…ä¸­æ˜¾ç¤º */
        }  
    </style>



    <body>
        <script src="/js/darkmode-js.min.js"></script>
        
        
            
                <div class="left-toc-container">
                    <nav id="toc" class="bs-docs-sidebar"></nav>
                </div>
            
        
        <div class="paper">

            

            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <style>
            .header-img {
                width: 56px;
                height: auto;
                object-fit: cover; /* ä¿æŒå›¾ç‰‡æ¯”ä¾‹ */
                transition: transform 0.3s ease-in-out; 
                border-radius: 50%; 
            }
            
        </style>
        <img 
            alt="^-^" 
            cache-control="max-age=86400" 
            class="header-img" 
            src="/img/favicon.jpg" 
        />
        <div class="header-content">
            <a class="logo" href="/">Stocks</a> 
            <span class="description">åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ | æœºå™¨äººç®—æ³•</span> 
        </div>
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">ğŸ  é¦–é¡µ</a></li>
            
        
            
                <li><a href="/list/">ğŸ“æ–‡ç« </a></li>
            
        
            
                <li><a href="/tags/">ğŸ“Œæ ‡ç­¾</a></li>
            
        
            
                <li><a href="/categories/">ğŸ“åˆ†ç±»</a></li>
            
        
            
                <li><a href="/about/">ğŸŒŸå…³äº</a></li>
            
        
    </ul>
</div>

                    
                    

                    
                    

                    <!--è¯´æ˜æ˜¯æ–‡ç« posté¡µé¢-->
                    
                        <div class="post-main">
    

    
        
            
                <div class="post-main-title" style="text-align: center;">
                    åŸºäºæœç´¢çš„è·¯å¾„è§„åˆ’â€”â€”A*ç®—æ³•
                </div>
            
        
      
    

    

        
            <div class="post-head-meta-center">
        
                
                    <span>æœ€è¿‘æ›´æ–°ï¼š2025-12-16</span> 
                
                
                    
                        &nbsp; | &nbsp;
                    
                     <span>å­—æ•°æ€»è®¡ï¼š3.7k</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span>é˜…è¯»ä¼°æ—¶ï¼š18åˆ†é’Ÿ</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span id="busuanzi_container_page_pv">
                        é˜…è¯»é‡ï¼š<span id="busuanzi_value_page_pv"></span>æ¬¡
                    </span>
                
            </div>
    

    <div class="post-md">
        
        <div class=".article-gallery"><h3 id="ä¸€aå¯»è·¯æ¼”ç¤º">ä¸€ã€A*å¯»è·¯æ¼”ç¤º</h3>
<center>
<a href="2.gif" class="gallery-item" style="box-shadow: none;"> <img src="2.gif" width="70%"></a>
</center>
<p><a target="_blank" rel="noopener" href="https://qiao.github.io/PathFinding.js/visual/">A*å¯è§†åŒ–ç½‘ç«™</a></p>
<h3 id="äºŒaå¯»è·¯ç®—æ³•">äºŒã€A*å¯»è·¯ç®—æ³•</h3>
<p>A*ç®—æ³•æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„<strong>å¯å‘å¼å¯»è·¯ç®—æ³•</strong>ï¼Œè¿™é‡Œå¯å‘çš„å«ä¹‰æ˜¯ï¼šä»æŸä¸ªä½ç½®å¼€å§‹å¯»è·¯çš„æ—¶å€™ï¼Œä¸æ˜¯å»éšæœºéå†ï¼Œè€Œæ˜¯åˆ©ç”¨ä¸€äº›å·²çŸ¥çš„ä¿¡æ¯ï¼Œæ¥ä¼°ç®—æ¯ç§é€‰æ‹©çš„æˆæœ¬ï¼Œç„¶åé€‰æ‹©æˆæœ¬æœ€ä½çš„æ–¹å‘ã€‚</p>
<p>A*å¯»è·¯ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³å¦‚ä¸‹ï¼š</p>
<ol type="1">
<li><p>ä½¿ç”¨å¯å‘å¼å‡½æ•°æ¥ä¼°è®¡ä»å½“å‰èŠ‚ç‚¹åˆ°ç›®æ ‡èŠ‚ç‚¹çš„æˆæœ¬(<code>h_cost</code>)ã€‚</p></li>
<li><p>ç»´æŠ¤ä¸€ä¸ªå¼€æ”¾åˆ—è¡¨( <code>open_list</code> å­˜å‚¨å¾…æ¢ç´¢çš„èŠ‚ç‚¹)å’Œä¸€ä¸ªå…³é—­åˆ—è¡¨( <code>close_list</code> å­˜å‚¨å·²æ¢ç´¢èŠ‚ç‚¹)ã€‚</p></li>
<li><p>éå†é‚»åŸŸèŠ‚ç‚¹æ—¶é€‰æ‹©æ€»æˆæœ¬( <code>f_cost = g_cost + h_cost</code> )æœ€ä½çš„èŠ‚ç‚¹æ¢ç´¢ã€‚</p></li>
</ol>
<h4 id="èŠ‚ç‚¹">2.1 èŠ‚ç‚¹</h4>
<p>ç®—æ³•ä¸­çš„èŠ‚ç‚¹éœ€è¦åŒ…å«
1. å½“å‰åæ ‡ä¿¡æ¯(x,y)
2. å½“å‰èŠ‚ç‚¹çš„æˆæœ¬få€¼ï¼Œgå€¼ï¼Œhå€¼</p>
<ul>
<li><p>gå€¼(g-cost)ï¼šä»èµ·ç‚¹åˆ°å½“å‰èŠ‚ç‚¹çš„å®é™…ä»£ä»·ï¼Œåæ˜ å·²çŸ¥è·¯å¾„çš„æˆæœ¬ã€‚</p></li>
<li><p>hå€¼(h-cost)ï¼šä»å½“å‰èŠ‚ç‚¹åˆ°ç›®æ ‡èŠ‚ç‚¹çš„å¯å‘å¼ä¼°è®¡å€¼ã€‚å¯å‘å¼ä¼°è®¡å€¼é€šå¸¸æ˜¯åŸºäºæŸç§å¯å‘å¼å‡½æ•°(å¦‚æ›¼å“ˆé¡¿è·ç¦»ã€æ¬§å‡ é‡Œå¾—è·ç¦»ç­‰)è®¡ç®—çš„ã€‚</p></li>
<li><p>få€¼(f-cost)ï¼šä»èµ·ç‚¹ç»è¿‡å½“å‰èŠ‚ç‚¹åˆ°è¾¾ç›®æ ‡èŠ‚ç‚¹çš„æ€»ä¼°è®¡å€¼ã€‚f = g + hã€‚</p></li>
</ul>
<ol start="3" type="1">
<li>çˆ¶èŠ‚ç‚¹ï¼Œå½“å‰èŠ‚ç‚¹æ‰€åœ¨æœ€ä¼˜è·¯å¾„ä¸‹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæœ€ç»ˆå€’é€€è·¯å¾„æ—¶ç”¨åˆ°ã€‚</li>
</ol>
<h4 id="å¼€æ”¾åˆ—è¡¨å’Œå…³é—­åˆ—è¡¨">2.2 å¼€æ”¾åˆ—è¡¨å’Œå…³é—­åˆ—è¡¨</h4>
<p>å¼€æ”¾åˆ—è¡¨ï¼šåŒ…å«æ‰€æœ‰å·²å‘ç°ä½†å°šæœªå®Œå…¨è¯„ä¼°çš„èŠ‚ç‚¹ï¼Œåˆå§‹åŒ–çš„æ—¶å€™åªç”¨æŠŠå¼€å§‹èŠ‚ç‚¹åŠ å…¥ã€‚
å…³é—­åˆ—è¡¨ï¼šåŒ…å«æ‰€æœ‰å·²è¯„ä¼°çš„èŠ‚ç‚¹ï¼Œåˆå§‹åŒ–çš„æ—¶å€™ä¸ºç©ºã€‚</p>
<blockquote>
<p><strong>å·²è¯„ä¼°èŠ‚ç‚¹</strong>æ˜¯æŒ‡ï¼šå·²ç»éå†é‚»å±…èŠ‚ç‚¹çš„èŠ‚ç‚¹</p>
</blockquote>
<p>è¿™æ ·ç®—æ³•ä¸ä¼šé‡å¤è¯„ä¼°å·²å¤„ç†çš„èŠ‚ç‚¹ï¼Œå› ä¸ºå·²ç»å¤„ç†çš„éƒ½åœ¨å…³é—­åˆ—è¡¨ä¸­ã€‚å¦ä¸€æ–¹é¢ï¼Œæ‰€æœ‰æ½œåœ¨çš„è·¯å¾„é€‰æ‹©éƒ½è¢«è€ƒè™‘ï¼Œå› ä¸ºåœ¨å¼€æ”¾åˆ—è¡¨ä¸­ã€‚</p>
<h4 id="æœç´¢è·¯å¾„æ­¥éª¤">2.3 æœç´¢è·¯å¾„æ­¥éª¤</h4>
<ol type="1">
<li><p><strong>åˆå§‹åŒ–</strong>ï¼šè®¾ç½®èµ·ç‚¹çš„gå€¼ä¸º0ï¼Œè®¡ç®—èµ·ç‚¹åˆ°ç»ˆç‚¹çš„å¯å‘ä¼°è®¡å€¼hï¼Œè®¡ç®—èµ·ç‚¹få€¼( <code>f = g + h</code> )ã€‚æŠŠèµ·ç‚¹æ”¾åˆ°å¼€æ”¾åˆ—è¡¨ä¸­ï¼Œè¿›å…¥å¾ªç¯ï¼Œåªè¦å¼€æ”¾åˆ—è¡¨ä¸ä¸ºç©ºï¼Œå°±ç»§ç»­æœç´¢ã€‚</p></li>
<li><p><strong>å¾ªç¯</strong>ï¼š</p></li>
</ol>
<p>ä»å¼€æ”¾åˆ—è¡¨ä¸­é€‰æ‹©få€¼æœ€å°çš„èŠ‚ç‚¹ä½œä¸ºå½“å‰è¯„ä¼°èŠ‚ç‚¹ï¼Œåˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦ä¸ºç›®æ ‡èŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯è¿›è¡Œå›æº¯ï¼›å¦‚æœä¸æ˜¯ç›®æ ‡èŠ‚ç‚¹ï¼Œå°†å½“å‰èŠ‚ç‚¹æ·»åŠ å…¥å…³é—­åˆ—è¡¨ï¼Œéå†å½“å‰è¯„ä¼°èŠ‚ç‚¹çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹ï¼š</p>
<ol type="1">
<li>å¿½ç•¥æ— æ•ˆèŠ‚ç‚¹å’Œå·²åœ¨å…³é—­åˆ—è¡¨ä¸­çš„é‚»å±…èŠ‚ç‚¹ï¼›</li>
<li>è®¡ç®—ä»èµ·ç‚¹ç»è¿‡å½“å‰èŠ‚ç‚¹åˆ°è¾¾é‚»å±…èŠ‚ç‚¹çš„gå€¼ï¼›</li>
<li>åˆ¤æ–­é‚»å±…èŠ‚ç‚¹æ˜¯å¦åœ¨å¼€æ”¾åˆ—è¡¨ä¸­ï¼š</li>
</ol>
<ul>
<li><p>å¦‚æœé‚»å±…èŠ‚ç‚¹ä¸åœ¨å¼€æ”¾åˆ—è¡¨ä¸­ï¼Œåˆ›å»ºé‚»å±…èŠ‚ç‚¹ï¼Œå°†å…¶åŠ å…¥ï¼›</p></li>
<li><p>å¦‚æœé‚»å±…èŠ‚ç‚¹åœ¨å¼€æ”¾åˆ—è¡¨ä¸­ï¼Œä¸”æ–°è·¯å¾„ <code>g_cost</code> ä¸æ¯”æ—§è·¯å¾„ <code>g_cost</code> å°ï¼Œè·³è¿‡ï¼›</p></li>
<li><p>å¦‚æœé‚»å±…èŠ‚ç‚¹åœ¨å¼€æ”¾åˆ—è¡¨ä¸­ï¼Œä½†æ–°è·¯å¾„ <code>g_cost</code> æ¯”æ—§è·¯å¾„ <code>g_cost</code> å°ï¼Œæ›´æ–°é‚»å±…èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€gå€¼ã€hå€¼ã€få€¼ï¼›</p></li>
</ul>
<ol start="3" type="1">
<li><strong>å›æº¯</strong>ï¼š</li>
</ol>
<ul>
<li>æœ€åå¦‚æœå¼€æ”¾åˆ—è¡¨ä¸ºç©ºä¸”æœªæ‰¾åˆ°è·¯å¾„ï¼Œåˆ™è¯´æ˜ä¸å­˜åœ¨æœ€çŸ­è·¯å¾„ï¼›</li>
<li>è‹¥æ‰¾åˆ°æœ€çŸ­è·¯å¾„ï¼Œåªéœ€å›æº¯é‡å»ºæœ€çŸ­è·¯å¾„å³å¯ã€‚åœ¨æœç´¢è¿‡ç¨‹ä¸­ï¼Œä¸ºæ¯ä¸ªæ¢ç´¢çš„èŠ‚ç‚¹è®¾ç½®äº† parent å±æ€§ï¼Œæœ€ååå‘éå† parent å±æ€§å³å¯ã€‚</li>
</ul>
<h4 id="aç®—æ³•å®ç°">2.4 A*ç®—æ³•å®ç°</h4>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unordered_set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AStarPlanner</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">    {</span><br><span class="line">        <span class="type">int</span> x, y;</span><br><span class="line">        <span class="type">double</span> g_cost;</span><br><span class="line">        <span class="type">double</span> h_cost;</span><br><span class="line">        Node *parent;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">double</span> <span class="title">f_cost</span><span class="params">()</span> <span class="type">const</span> </span>{ <span class="keyword">return</span> g_cost + h_cost; }</span><br><span class="line"></span><br><span class="line">        <span class="built_in">Node</span>(<span class="type">int</span> x_, <span class="type">int</span> y_, <span class="type">double</span> g = <span class="number">0</span>, <span class="type">double</span> h = <span class="number">0</span>, Node *p = <span class="literal">nullptr</span>)</span><br><span class="line">            : <span class="built_in">x</span>(x_), <span class="built_in">y</span>(y_), <span class="built_in">g_cost</span>(g), <span class="built_in">h_cost</span>(h), <span class="built_in">parent</span>(p) {}</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">NodeCompare</span></span><br><span class="line">    {</span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> Node *a, <span class="type">const</span> Node *b)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">        </span>{</span><br><span class="line">            <span class="keyword">return</span> a-&gt;<span class="built_in">f_cost</span>() &gt; b-&gt;<span class="built_in">f_cost</span>();</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">NodeHash</span></span><br><span class="line">    {</span><br><span class="line">        <span class="function">std::<span class="type">size_t</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> std::pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; &amp;p)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">        </span>{</span><br><span class="line">            <span class="keyword">return</span> std::<span class="built_in">hash</span>&lt;<span class="type">int</span>&gt;()(p.first) ^ (std::<span class="built_in">hash</span>&lt;<span class="type">int</span>&gt;()(p.second) &lt;&lt; <span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    <span class="built_in">AStarPlanner</span>(<span class="type">const</span> cv::Mat &amp;map, <span class="type">double</span> resolution)</span><br><span class="line">        : <span class="built_in">map_</span>(map), <span class="built_in">resolution_</span>(resolution)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">if</span> (map_.<span class="built_in">channels</span>() != <span class="number">1</span>)</span><br><span class="line">        {</span><br><span class="line">            cv::<span class="built_in">cvtColor</span>(map_, map_, cv::COLOR_BGR2GRAY);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    std::vector&lt;std::pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt; <span class="built_in">findPath</span>(<span class="type">int</span> startX, <span class="type">int</span> startY, <span class="type">int</span> goalX, <span class="type">int</span> goalY)</span><br><span class="line">    {</span><br><span class="line">        std::vector&lt;std::pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt; path;</span><br><span class="line">        <span class="comment">// æ£€æŸ¥èµ·ç‚¹å’Œç»ˆç‚¹æ˜¯å¦æœ‰æ•ˆ</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">isValid</span>(startX, startY) || !<span class="built_in">isValid</span>(goalX, goalY))</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">return</span> path;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨mapä»£æ›¿unordered_setæ¥åŒæ—¶å­˜å‚¨èŠ‚ç‚¹ä¿¡æ¯å’Œé¿å…é‡å¤</span></span><br><span class="line">        std::priority_queue&lt;Node *, std::vector&lt;Node *&gt;, NodeCompare&gt; open_set;</span><br><span class="line">        std::unordered_set&lt;std::pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;, NodeHash&gt; closed_set;</span><br><span class="line">        std::unordered_map&lt;std::pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;, Node *, NodeHash&gt; node_map; <span class="comment">// ç”¨äºå¿«é€ŸæŸ¥æ‰¾open_list</span></span><br><span class="line">        std::vector&lt;Node *&gt; all_nodes;                                      <span class="comment">// ç”¨äºå†…å­˜ç®¡ç†</span></span><br><span class="line"></span><br><span class="line">        Node *start_node = <span class="keyword">new</span> <span class="built_in">Node</span>(startX, startY, <span class="number">0</span>, <span class="built_in">heuristic</span>(startX, startY, goalX, goalY));</span><br><span class="line">        all_nodes.<span class="built_in">push_back</span>(start_node);</span><br><span class="line">        open_set.<span class="built_in">push</span>(start_node);</span><br><span class="line">        node_map[{startX, startY}] = start_node;</span><br><span class="line"></span><br><span class="line">        Node *goal_node = <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!open_set.<span class="built_in">empty</span>())</span><br><span class="line">        {</span><br><span class="line">            Node *current = open_set.<span class="built_in">top</span>();</span><br><span class="line">            open_set.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è¾¾åˆ°ç›®æ ‡</span></span><br><span class="line">            <span class="keyword">if</span> (current-&gt;x == goalX &amp;&amp; current-&gt;y == goalY)</span><br><span class="line">            {</span><br><span class="line">                goal_node = current;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è·³è¿‡å·²ç»å¤„ç†çš„èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> (closed_set.<span class="built_in">count</span>({current-&gt;x, current-&gt;y}))</span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ·»åŠ åˆ°å·²è®¿é—®é›†åˆ</span></span><br><span class="line">            closed_set.<span class="built_in">insert</span>({current-&gt;x, current-&gt;y});</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ‰©å±•é‚»å±…èŠ‚ç‚¹(8è¿é€š)</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> dx = <span class="number">-1</span>; dx &lt;= <span class="number">1</span>; ++dx)</span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> dy = <span class="number">-1</span>; dy &lt;= <span class="number">1</span>; ++dy)</span><br><span class="line">                {</span><br><span class="line">                    <span class="keyword">if</span> (dx == <span class="number">0</span> &amp;&amp; dy == <span class="number">0</span>)</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    <span class="type">int</span> nx = current-&gt;x + dx;</span><br><span class="line">                    <span class="type">int</span> ny = current-&gt;y + dy;</span><br><span class="line">                    <span class="keyword">if</span> (!<span class="built_in">isValid</span>(nx, ny) || closed_set.<span class="built_in">count</span>({nx, ny}))</span><br><span class="line">                    {</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    }</span><br><span class="line">                    <span class="type">double</span> move_cost = (dx != <span class="number">0</span> &amp;&amp; dy != <span class="number">0</span>) ? <span class="number">1.414</span> : <span class="number">1.0</span>;</span><br><span class="line">                    <span class="type">double</span> new_g_cost = current-&gt;g_cost + move_cost;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// æ£€æŸ¥æ˜¯å¦å·²ç»æœ‰è¿™ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">                    <span class="keyword">if</span> (node_map.<span class="built_in">find</span>({nx, ny}) != node_map.<span class="built_in">end</span>())</span><br><span class="line">                    {</span><br><span class="line">                        <span class="keyword">if</span> (new_g_cost &lt; node_map[{nx, ny}]-&gt;g_cost)</span><br><span class="line">                        {</span><br><span class="line">                            Node *neighbor = node_map[{nx, ny}];</span><br><span class="line">                            neighbor-&gt;g_cost = new_g_cost;</span><br><span class="line">                            neighbor-&gt;parent = current;</span><br><span class="line">                            <span class="comment">// æ³¨æ„ï¼šè¿™é‡Œè™½ç„¶æ›´æ–°äº†g_costï¼Œä½†priority_queueä¸ä¼šè‡ªåŠ¨è°ƒæ•´é¡ºåº</span></span><br><span class="line">                            <span class="comment">// ç®€å•çš„åšæ³•æ˜¯å†æ¬¡pushï¼Œå¹¶åœ¨popæ—¶æ£€æŸ¥closed_set</span></span><br><span class="line">                            open_set.<span class="built_in">push</span>(neighbor);</span><br><span class="line">                        }</span><br><span class="line">                    }</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                    {</span><br><span class="line">                        Node *neighbor = <span class="keyword">new</span> <span class="built_in">Node</span>(nx, ny, new_g_cost, <span class="built_in">heuristic</span>(nx, ny, goalX, goalY), current);</span><br><span class="line">                        all_nodes.<span class="built_in">push_back</span>(neighbor);</span><br><span class="line">                        open_set.<span class="built_in">push</span>(neighbor);</span><br><span class="line">                        node_map[{nx, ny}] = neighbor;</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(goal_node){</span><br><span class="line">            Node *current = goal_node;</span><br><span class="line">            <span class="keyword">while</span>(current != <span class="literal">nullptr</span>){</span><br><span class="line">                path.<span class="built_in">push_back</span>({current-&gt;x, current-&gt;y});</span><br><span class="line">                current = current-&gt;parent;</span><br><span class="line">            }</span><br><span class="line">            std::<span class="built_in">reverse</span>(path.<span class="built_in">begin</span>(), path.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// æ¸…ç†å†…å­˜</span></span><br><span class="line">        <span class="keyword">for</span> (Node *node : all_nodes){</span><br><span class="line">            <span class="keyword">delete</span> node;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> path;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    cv::Mat map_;</span><br><span class="line">    <span class="type">double</span> resolution_;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isValid</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span> || y &lt; <span class="number">0</span> || x &gt;= map_.cols || y &gt;= map_.rows)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> map_.<span class="built_in">at</span>&lt;uchar&gt;(y, x) &gt; <span class="number">128</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">heuristic</span><span class="params">(<span class="type">int</span> startX, <span class="type">int</span> startY, <span class="type">int</span> goalX, <span class="type">int</span> goalY)</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ¬§å‡ é‡Œå¾—è·ç¦»ä½œä¸ºå¯å‘å¼å‡½æ•°</span></span><br><span class="line">        <span class="type">int</span> dx = goalX - startX;</span><br><span class="line">        <span class="type">int</span> dy = goalY - startY;</span><br><span class="line">        <span class="keyword">return</span> std::<span class="built_in">sqrt</span>(dx * dx + dy * dy);</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">// 1. åˆ›å»ºåœ°å›¾ (500x500, å•é€šé“, ç™½è‰²èƒŒæ™¯è¡¨ç¤ºæ— éšœç¢)</span></span><br><span class="line">    <span class="type">int</span> width = <span class="number">500</span>;</span><br><span class="line">    <span class="type">int</span> height = <span class="number">500</span>;</span><br><span class="line">    <span class="function">cv::Mat <span class="title">map</span><span class="params">(height, width, CV_8UC1, cv::Scalar(<span class="number">255</span>))</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. æ·»åŠ éšœç¢ç‰© (é»‘è‰²è¡¨ç¤ºéšœç¢)</span></span><br><span class="line">    <span class="comment">// éšœç¢ç‰© 1</span></span><br><span class="line">    cv::<span class="built_in">rectangle</span>(map, cv::<span class="built_in">Point</span>(<span class="number">150</span>, <span class="number">100</span>), cv::<span class="built_in">Point</span>(<span class="number">200</span>, <span class="number">400</span>), cv::<span class="built_in">Scalar</span>(<span class="number">0</span>), <span class="number">-1</span>);</span><br><span class="line">    <span class="comment">// éšœç¢ç‰© 2</span></span><br><span class="line">    cv::<span class="built_in">rectangle</span>(map, cv::<span class="built_in">Point</span>(<span class="number">300</span>, <span class="number">50</span>), cv::<span class="built_in">Point</span>(<span class="number">350</span>, <span class="number">350</span>), cv::<span class="built_in">Scalar</span>(<span class="number">0</span>), <span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. å®šä¹‰èµ·ç‚¹å’Œç»ˆç‚¹</span></span><br><span class="line">    <span class="type">int</span> startX = <span class="number">50</span>, startY = <span class="number">250</span>;</span><br><span class="line">    <span class="type">int</span> goalX = <span class="number">450</span>, goalY = <span class="number">250</span>;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">"Map Size: "</span> &lt;&lt; width &lt;&lt; <span class="string">"x"</span> &lt;&lt; height &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">"Start: ("</span> &lt;&lt; startX &lt;&lt; <span class="string">", "</span> &lt;&lt; startY &lt;&lt; <span class="string">")"</span> &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">"Goal: ("</span> &lt;&lt; goalX &lt;&lt; <span class="string">", "</span> &lt;&lt; goalY &lt;&lt; <span class="string">")"</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. åˆ›å»ºè§„åˆ’å™¨å¹¶å¯»è·¯</span></span><br><span class="line">    <span class="function">AStarPlanner <span class="title">planner</span><span class="params">(map, <span class="number">1.0</span>)</span></span>;</span><br><span class="line">    std::vector&lt;std::pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt; path = planner.<span class="built_in">findPath</span>(startX, startY, goalX, goalY);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5. å¯è§†åŒ–ç»“æœ</span></span><br><span class="line">    cv::Mat result_img;</span><br><span class="line">    cv::<span class="built_in">cvtColor</span>(map, result_img, cv::COLOR_GRAY2BGR); <span class="comment">// è½¬ä¸ºå½©è‰²ä»¥ä¾¿ç»˜åˆ¶å½©è‰²è·¯å¾„</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (path.<span class="built_in">empty</span>())</span><br><span class="line">    {</span><br><span class="line">        std::cout &lt;&lt; <span class="string">"æœªæ‰¾åˆ°è·¯å¾„!"</span> &lt;&lt; std::endl;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    {</span><br><span class="line">        std::cout &lt;&lt; <span class="string">"æ‰¾åˆ°è·¯å¾„, é•¿åº¦: "</span> &lt;&lt; path.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line">        <span class="comment">// ç»˜åˆ¶è·¯å¾„ (çº¢è‰²çº¿æ¡)</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; path.<span class="built_in">size</span>() - <span class="number">1</span>; ++i)</span><br><span class="line">        {</span><br><span class="line">            <span class="function">cv::Point <span class="title">p1</span><span class="params">(path[i].first, path[i].second)</span></span>;</span><br><span class="line">            <span class="function">cv::Point <span class="title">p2</span><span class="params">(path[i<span class="number">+1</span>].first, path[i<span class="number">+1</span>].second)</span></span>;</span><br><span class="line">            cv::<span class="built_in">line</span>(result_img, p1, p2, cv::<span class="built_in">Scalar</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»˜åˆ¶èµ·ç‚¹ (ç»¿è‰²) å’Œ ç»ˆç‚¹ (è“è‰²)</span></span><br><span class="line">    cv::<span class="built_in">circle</span>(result_img, cv::<span class="built_in">Point</span>(startX, startY), <span class="number">8</span>, cv::<span class="built_in">Scalar</span>(<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">-1</span>); </span><br><span class="line">    cv::<span class="built_in">circle</span>(result_img, cv::<span class="built_in">Point</span>(goalX, goalY), <span class="number">8</span>, cv::<span class="built_in">Scalar</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>), <span class="number">-1</span>);   </span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¿å­˜ç»“æœå›¾ç‰‡</span></span><br><span class="line">    cv::<span class="built_in">imshow</span>(<span class="string">"A_star_result"</span>, result_img);</span><br><span class="line">    cv::<span class="built_in">waitKey</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<center>
<a href="A_star.jpeg" class="gallery-item" style="box-shadow: none;"> <img src="A_star.jpeg" width="50%"></a>
</center>
<h3 id="ä¸‰å…¶ä»–">ä¸‰ã€å…¶ä»–</h3>
<p>å‚è€ƒæ–‡çŒ®ï¼š<a target="_blank" rel="noopener" href="https://gallery.selfboot.cn/zh/algorithms/astar">A* ç®—æ³•æŸ¥æ‰¾æœ€çŸ­è·¯å¾„</a></p>
<h4 id="bfs">3.1 BFS</h4>
<p>å’Œ<a target="_blank" rel="noopener" href="https://gallery.selfboot.cn/zh/algorithms/bfs_path">å¹¿åº¦ä¼˜å…ˆæœç´¢(BFS)</a>è·¯å¾„ç›¸æ¯”ï¼ŒA* ç®—æ³•å¯ä»¥æ›´å¿«åœ°æ‰¾åˆ°æœ€çŸ­è·¯å¾„ã€‚å› ä¸ºå¹¿åº¦ä¼˜å…ˆæœç´¢æ˜¯ç›²ç›®åœ°éå†æ‰€æœ‰å¯èƒ½è·¯å¾„ã€‚è€Œ A* ç®—æ³•ä¼šåˆ©ç”¨å¯å‘å¼å‡½æ•°æ¥ä¼°è®¡ä»å½“å‰èŠ‚ç‚¹åˆ°ç›®æ ‡èŠ‚ç‚¹çš„æˆæœ¬ï¼Œä»è€Œæ›´å¿«åœ°æ‰¾åˆ°æœ€çŸ­è·¯å¾„ã€‚</p>
<p><strong>BFSæ²¡æœ‰æœ€ä¼˜æ€§ï¼Œä¸è€ƒè™‘g_costå’Œh_costã€‚</strong></p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unordered_set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BFSPlanner</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">    {</span><br><span class="line">        <span class="type">int</span> x, y;</span><br><span class="line">        Node *parent;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">Node</span>(<span class="type">int</span> x_, <span class="type">int</span> y_, Node *p = <span class="literal">nullptr</span>)</span><br><span class="line">            : <span class="built_in">x</span>(x_), <span class="built_in">y</span>(y_), <span class="built_in">parent</span>(p) {}</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">NodeHash</span></span><br><span class="line">    {</span><br><span class="line">        <span class="function">std::<span class="type">size_t</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> std::pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; &amp;p)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">        </span>{</span><br><span class="line">            <span class="keyword">return</span> std::<span class="built_in">hash</span>&lt;<span class="type">int</span>&gt;()(p.first) ^ (std::<span class="built_in">hash</span>&lt;<span class="type">int</span>&gt;()(p.second) &lt;&lt; <span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    <span class="built_in">BFSPlanner</span>(<span class="type">const</span> cv::Mat &amp;map)</span><br><span class="line">        : <span class="built_in">map_</span>(map)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">if</span> (map_.<span class="built_in">channels</span>() != <span class="number">1</span>)</span><br><span class="line">        {</span><br><span class="line">            cv::<span class="built_in">cvtColor</span>(map_, map_, cv::COLOR_BGR2GRAY);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    std::vector&lt;std::pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt; <span class="built_in">findPath</span>(<span class="type">int</span> startX, <span class="type">int</span> startY, <span class="type">int</span> goalX, <span class="type">int</span> goalY)</span><br><span class="line">    {</span><br><span class="line">        std::vector&lt;std::pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt; path;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">isValid</span>(startX, startY) || !<span class="built_in">isValid</span>(goalX, goalY))</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">return</span> path;</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">//ç»´æŠ¤çš„æ•°æ®ç»“æ„</span></span><br><span class="line">        std::queue&lt;Node *&gt; q;</span><br><span class="line">        std::unordered_set&lt;std::pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;, NodeHash&gt; visited;</span><br><span class="line">        std::vector&lt;Node *&gt; all_nodes;</span><br><span class="line"></span><br><span class="line">        Node *start_node = <span class="keyword">new</span> <span class="built_in">Node</span>(startX, startY);</span><br><span class="line">        all_nodes.<span class="built_in">push_back</span>(start_node);</span><br><span class="line">        q.<span class="built_in">push</span>(start_node);</span><br><span class="line">        visited.<span class="built_in">insert</span>({startX, startY});</span><br><span class="line"></span><br><span class="line">        Node *goal_node = <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!q.<span class="built_in">empty</span>())</span><br><span class="line">        {</span><br><span class="line">            Node *current = q.<span class="built_in">front</span>();</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (current-&gt;x == goalX &amp;&amp; current-&gt;y == goalY)</span><br><span class="line">            {</span><br><span class="line">                goal_node = current;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 8-connected grid</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> dx = <span class="number">-1</span>; dx &lt;= <span class="number">1</span>; ++dx)</span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> dy = <span class="number">-1</span>; dy &lt;= <span class="number">1</span>; ++dy)</span><br><span class="line">                {</span><br><span class="line">                    <span class="keyword">if</span> (dx == <span class="number">0</span> &amp;&amp; dy == <span class="number">0</span>)</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">                    <span class="type">int</span> nx = current-&gt;x + dx;</span><br><span class="line">                    <span class="type">int</span> ny = current-&gt;y + dy;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (<span class="built_in">isValid</span>(nx, ny) &amp;&amp; visited.<span class="built_in">find</span>({nx, ny}) == visited.<span class="built_in">end</span>())</span><br><span class="line">                    {</span><br><span class="line">                        Node *neighbor = <span class="keyword">new</span> <span class="built_in">Node</span>(nx, ny, current);</span><br><span class="line">                        all_nodes.<span class="built_in">push_back</span>(neighbor);</span><br><span class="line">                        q.<span class="built_in">push</span>(neighbor);</span><br><span class="line">                        visited.<span class="built_in">insert</span>({nx, ny});</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (goal_node)</span><br><span class="line">        {</span><br><span class="line">            Node *current = goal_node;</span><br><span class="line">            <span class="keyword">while</span> (current != <span class="literal">nullptr</span>)</span><br><span class="line">            {</span><br><span class="line">                path.<span class="built_in">push_back</span>({current-&gt;x, current-&gt;y});</span><br><span class="line">                current = current-&gt;parent;</span><br><span class="line">            }</span><br><span class="line">            std::<span class="built_in">reverse</span>(path.<span class="built_in">begin</span>(), path.<span class="built_in">end</span>());</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Node *node : all_nodes)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">delete</span> node;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> path;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    cv::Mat map_;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isValid</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span> || y &lt; <span class="number">0</span> || x &gt;= map_.cols || y &gt;= map_.rows)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> map_.<span class="built_in">at</span>&lt;uchar&gt;(y, x) &gt; <span class="number">128</span>;</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">// 1. åˆ›å»ºåœ°å›¾ (500x500, å•é€šé“, ç™½è‰²èƒŒæ™¯è¡¨ç¤ºæ— éšœç¢)</span></span><br><span class="line">    <span class="type">int</span> width = <span class="number">500</span>;</span><br><span class="line">    <span class="type">int</span> height = <span class="number">500</span>;</span><br><span class="line">    <span class="function">cv::Mat <span class="title">map</span><span class="params">(height, width, CV_8UC1, cv::Scalar(<span class="number">255</span>))</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. æ·»åŠ éšœç¢ç‰© (é»‘è‰²è¡¨ç¤ºéšœç¢)</span></span><br><span class="line">    cv::<span class="built_in">rectangle</span>(map, cv::<span class="built_in">Point</span>(<span class="number">150</span>, <span class="number">100</span>), cv::<span class="built_in">Point</span>(<span class="number">200</span>, <span class="number">400</span>), cv::<span class="built_in">Scalar</span>(<span class="number">0</span>), <span class="number">-1</span>);</span><br><span class="line">    cv::<span class="built_in">rectangle</span>(map, cv::<span class="built_in">Point</span>(<span class="number">300</span>, <span class="number">50</span>), cv::<span class="built_in">Point</span>(<span class="number">350</span>, <span class="number">350</span>), cv::<span class="built_in">Scalar</span>(<span class="number">0</span>), <span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. å®šä¹‰èµ·ç‚¹å’Œç»ˆç‚¹</span></span><br><span class="line">    <span class="type">int</span> startX = <span class="number">50</span>, startY = <span class="number">250</span>;</span><br><span class="line">    <span class="type">int</span> goalX = <span class="number">450</span>, goalY = <span class="number">250</span>;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">"Map Size: "</span> &lt;&lt; width &lt;&lt; <span class="string">"x"</span> &lt;&lt; height &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">"Start: ("</span> &lt;&lt; startX &lt;&lt; <span class="string">", "</span> &lt;&lt; startY &lt;&lt; <span class="string">")"</span> &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">"Goal: ("</span> &lt;&lt; goalX &lt;&lt; <span class="string">", "</span> &lt;&lt; goalY &lt;&lt; <span class="string">")"</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. åˆ›å»ºè§„åˆ’å™¨å¹¶å¯»è·¯</span></span><br><span class="line">    <span class="function">BFSPlanner <span class="title">planner</span><span class="params">(map)</span></span>;</span><br><span class="line">    std::vector&lt;std::pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt; path = planner.<span class="built_in">findPath</span>(startX, startY, goalX, goalY);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5. å¯è§†åŒ–ç»“æœ</span></span><br><span class="line">    cv::Mat result_img;</span><br><span class="line">    cv::<span class="built_in">cvtColor</span>(map, result_img, cv::COLOR_GRAY2BGR);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (path.<span class="built_in">empty</span>())</span><br><span class="line">    {</span><br><span class="line">        std::cout &lt;&lt; <span class="string">"æœªæ‰¾åˆ°è·¯å¾„!"</span> &lt;&lt; std::endl;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    {</span><br><span class="line">        std::cout &lt;&lt; <span class="string">"æ‰¾åˆ°è·¯å¾„, é•¿åº¦: "</span> &lt;&lt; path.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; path.<span class="built_in">size</span>() - <span class="number">1</span>; ++i)</span><br><span class="line">        {</span><br><span class="line">            <span class="function">cv::Point <span class="title">p1</span><span class="params">(path[i].first, path[i].second)</span></span>;</span><br><span class="line">            <span class="function">cv::Point <span class="title">p2</span><span class="params">(path[i<span class="number">+1</span>].first, path[i<span class="number">+1</span>].second)</span></span>;</span><br><span class="line">            cv::<span class="built_in">line</span>(result_img, p1, p2, cv::<span class="built_in">Scalar</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>), <span class="number">2</span>); <span class="comment">// Blue for BFS</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    cv::<span class="built_in">circle</span>(result_img, cv::<span class="built_in">Point</span>(startX, startY), <span class="number">8</span>, cv::<span class="built_in">Scalar</span>(<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">-1</span>);</span><br><span class="line">    cv::<span class="built_in">circle</span>(result_img, cv::<span class="built_in">Point</span>(goalX, goalY), <span class="number">8</span>, cv::<span class="built_in">Scalar</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">    cv::<span class="built_in">imshow</span>(<span class="string">"BFS_result"</span>, result_img);</span><br><span class="line">    cv::<span class="built_in">waitKey</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<center>
<a href="BFS.jpeg" class="gallery-item" style="box-shadow: none;"> <img src="BFS.jpeg" width="50%"></a>
</center>
<h4 id="dijkstraç®—æ³•">3.2 Dijkstraç®—æ³•</h4>
<p>Dijkstra ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡é€æ­¥æ‰©å±•æœ€çŸ­è·¯å¾„æ¥æ‰¾åˆ°ä»èµ·ç‚¹åˆ°æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹çš„æœ€çŸ­è·ç¦»ã€‚å®ƒé‡‡ç”¨äº†ä¸€ç§è´ªå¿ƒçš„ç­–ç•¥ï¼Œæ¯æ¬¡éƒ½é€‰æ‹©å½“å‰æœªè®¿é—®èŠ‚ç‚¹ä¸­ g_cost æœ€å°çš„èŠ‚ç‚¹è¿›è¡Œæ‰©å±•ã€‚</p>
<p>ä¸ <a target="_blank" rel="noopener" href="https://gallery.selfboot.cn/zh/algorithms/dijkstra">Dijkstraç®—æ³•</a> ç›¸æ¯”ï¼ŒA<em>ç®—æ³•åªæ‰¾åˆ°ä»æŒ‡å®šæºåˆ°æŒ‡å®šç›®æ ‡çš„æœ€çŸ­è·¯å¾„ï¼Œè€Œä¸æ˜¯ä»æŒ‡å®šæºåˆ°æ‰€æœ‰å¯èƒ½ç›®æ ‡çš„æœ€çŸ­è·¯å¾„æ ‘ã€‚å› æ­¤A</em>ç®—æ³•éå†çš„èŠ‚ç‚¹æ•°æ›´å°‘ï¼Œè€—æ—¶æ›´çŸ­ã€‚</p>
<p><span style="color: red;">å¯¹äºDijkstraç®—æ³•ï¼Œç”±äºæ²¡æœ‰ç‰¹å®šç›®æ ‡å¯¼å‘ï¼Œç®—æ³•ç”Ÿæˆäº†æ•´ä¸ªåœ°å›¾çš„æœ€çŸ­è·¯å¾„æ ‘ã€‚åœ°å›¾ä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥ä½œä¸ºä¸€ä¸ªç›®æ ‡ï¼Œç®—æ³•ä¼šæä¾›é’ˆå¯¹æ­¤ç›®æ ‡çš„æœ€ä¼˜è·¯å¾„ã€‚å› æ­¤Dijkstraç®—æ³•å¸¸ç”¨äºåœ°å›¾å¯¼èˆªç­‰é¢†åŸŸã€‚</span></p>
<p>æœ€åå†é¡ºä¾¿æä¸‹ï¼ŒDijkstra ç®—æ³•è¦æ±‚å›¾ä¸­æ‰€æœ‰è¾¹çš„æƒé‡éƒ½å¿…é¡»æ˜¯éè´Ÿæ•°ã€‚è¿™æ˜¯å› ä¸ºï¼š</p>
<ol type="1">
<li><p>å¦‚æœå­˜åœ¨è´Ÿæƒé‡è¾¹ï¼Œç®—æ³•çš„è´ªå¿ƒç­–ç•¥å¯èƒ½ä¼šå¤±æ•ˆï¼›</p></li>
<li><p>ä¸€æ—¦ç¡®å®šæŸä¸ªé¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„åï¼Œå¯èƒ½ä¼šé€šè¿‡è´Ÿæƒé‡è¾¹æ‰¾åˆ°æ›´çŸ­çš„è·¯å¾„ï¼Œè¿™è¿èƒŒäº†ç®—æ³•çš„åŸºæœ¬å‡è®¾ï¼šå·²ç¡®å®šçš„æœ€çŸ­è·¯å¾„ä¸ä¼šå†è¢«æ›´æ–°ã€‚</p></li>
</ol>
<p><strong>Dijkstraç®—æ³•å®ç°ä¸A_starå‡ ä¹ä¸€æ ·ï¼Œå”¯ä¸€åŒºåˆ«åœ¨äºDijkstraä½¿ç”¨g_costä½œä¸ºä¼˜å…ˆé˜Ÿåˆ—çš„ä¼˜å…ˆçº§ã€‚</strong></p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unordered_set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DijkstraPlanner</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">    {</span><br><span class="line">        <span class="type">int</span> x, y;</span><br><span class="line">        <span class="type">double</span> g_cost;</span><br><span class="line">        Node *parent;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">Node</span>(<span class="type">int</span> x_, <span class="type">int</span> y_, <span class="type">double</span> g = <span class="number">0</span>, Node *p = <span class="literal">nullptr</span>)</span><br><span class="line">            : <span class="built_in">x</span>(x_), <span class="built_in">y</span>(y_), <span class="built_in">g_cost</span>(g), <span class="built_in">parent</span>(p) {}</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">NodeCompare</span></span><br><span class="line">    {</span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> Node *a, <span class="type">const</span> Node *b)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">        </span>{</span><br><span class="line">            <span class="keyword">return</span> a-&gt;g_cost &gt; b-&gt;g_cost;</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">NodeHash</span></span><br><span class="line">    {</span><br><span class="line">        <span class="function">std::<span class="type">size_t</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> std::pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; &amp;p)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">        </span>{</span><br><span class="line">            <span class="keyword">return</span> std::<span class="built_in">hash</span>&lt;<span class="type">int</span>&gt;()(p.first) ^ (std::<span class="built_in">hash</span>&lt;<span class="type">int</span>&gt;()(p.second) &lt;&lt; <span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    <span class="built_in">DijkstraPlanner</span>(<span class="type">const</span> cv::Mat &amp;map)</span><br><span class="line">        : <span class="built_in">map_</span>(map)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">if</span> (map_.<span class="built_in">channels</span>() != <span class="number">1</span>)</span><br><span class="line">        {</span><br><span class="line">            cv::<span class="built_in">cvtColor</span>(map_, map_, cv::COLOR_BGR2GRAY);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    std::vector&lt;std::pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt; <span class="built_in">findPath</span>(<span class="type">int</span> startX, <span class="type">int</span> startY, <span class="type">int</span> goalX, <span class="type">int</span> goalY)</span><br><span class="line">    {</span><br><span class="line">        std::vector&lt;std::pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt; path;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">isValid</span>(startX, startY) || !<span class="built_in">isValid</span>(goalX, goalY))</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">return</span> path;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        std::priority_queue&lt;Node *, std::vector&lt;Node *&gt;, NodeCompare&gt; open_set;</span><br><span class="line">        std::unordered_set&lt;std::pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;, NodeHash&gt; closed_set;</span><br><span class="line">        std::unordered_map&lt;std::pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;, Node *, NodeHash&gt; node_map;</span><br><span class="line">        std::vector&lt;Node *&gt; all_nodes;</span><br><span class="line"></span><br><span class="line">        Node *start_node = <span class="keyword">new</span> <span class="built_in">Node</span>(startX, startY, <span class="number">0</span>);</span><br><span class="line">        all_nodes.<span class="built_in">push_back</span>(start_node);</span><br><span class="line">        open_set.<span class="built_in">push</span>(start_node);</span><br><span class="line">        node_map[{startX, startY}] = start_node;</span><br><span class="line"></span><br><span class="line">        Node *goal_node = <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!open_set.<span class="built_in">empty</span>())</span><br><span class="line">        {</span><br><span class="line">            Node *current = open_set.<span class="built_in">top</span>();</span><br><span class="line">            open_set.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (current-&gt;x == goalX &amp;&amp; current-&gt;y == goalY)</span><br><span class="line">            {</span><br><span class="line">                goal_node = current;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (closed_set.<span class="built_in">count</span>({current-&gt;x, current-&gt;y}))</span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            closed_set.<span class="built_in">insert</span>({current-&gt;x, current-&gt;y});</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> dx = <span class="number">-1</span>; dx &lt;= <span class="number">1</span>; ++dx)</span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> dy = <span class="number">-1</span>; dy &lt;= <span class="number">1</span>; ++dy)</span><br><span class="line">                {</span><br><span class="line">                    <span class="keyword">if</span> (dx == <span class="number">0</span> &amp;&amp; dy == <span class="number">0</span>)</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    <span class="type">int</span> nx = current-&gt;x + dx;</span><br><span class="line">                    <span class="type">int</span> ny = current-&gt;y + dy;</span><br><span class="line">                    <span class="keyword">if</span> (!<span class="built_in">isValid</span>(nx, ny) || closed_set.<span class="built_in">count</span>({nx, ny}))</span><br><span class="line">                    {</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    }</span><br><span class="line">                    <span class="type">double</span> move_cost = (dx != <span class="number">0</span> &amp;&amp; dy != <span class="number">0</span>) ? <span class="number">1.414</span> : <span class="number">1.0</span>;</span><br><span class="line">                    <span class="type">double</span> new_g_cost = current-&gt;g_cost + move_cost;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (node_map.<span class="built_in">find</span>({nx, ny}) != node_map.<span class="built_in">end</span>())</span><br><span class="line">                    {</span><br><span class="line">                        <span class="keyword">if</span> (new_g_cost &lt; node_map[{nx, ny}]-&gt;g_cost)</span><br><span class="line">                        {</span><br><span class="line">                            Node *neighbor = node_map[{nx, ny}];</span><br><span class="line">                            neighbor-&gt;g_cost = new_g_cost;</span><br><span class="line">                            neighbor-&gt;parent = current;</span><br><span class="line">                            open_set.<span class="built_in">push</span>(neighbor);</span><br><span class="line">                        }</span><br><span class="line">                    }</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                    {</span><br><span class="line">                        Node *neighbor = <span class="keyword">new</span> <span class="built_in">Node</span>(nx, ny, new_g_cost, current);</span><br><span class="line">                        all_nodes.<span class="built_in">push_back</span>(neighbor);</span><br><span class="line">                        open_set.<span class="built_in">push</span>(neighbor);</span><br><span class="line">                        node_map[{nx, ny}] = neighbor;</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (goal_node)</span><br><span class="line">        {</span><br><span class="line">            Node *current = goal_node;</span><br><span class="line">            <span class="keyword">while</span> (current != <span class="literal">nullptr</span>)</span><br><span class="line">            {</span><br><span class="line">                path.<span class="built_in">push_back</span>({current-&gt;x, current-&gt;y});</span><br><span class="line">                current = current-&gt;parent;</span><br><span class="line">            }</span><br><span class="line">            std::<span class="built_in">reverse</span>(path.<span class="built_in">begin</span>(), path.<span class="built_in">end</span>());</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Node *node : all_nodes)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">delete</span> node;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> path;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    cv::Mat map_;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isValid</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span> || y &lt; <span class="number">0</span> || x &gt;= map_.cols || y &gt;= map_.rows)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> map_.<span class="built_in">at</span>&lt;uchar&gt;(y, x) &gt; <span class="number">128</span>;</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="type">int</span> width = <span class="number">500</span>;</span><br><span class="line">    <span class="type">int</span> height = <span class="number">500</span>;</span><br><span class="line">    <span class="function">cv::Mat <span class="title">map</span><span class="params">(height, width, CV_8UC1, cv::Scalar(<span class="number">255</span>))</span></span>;</span><br><span class="line"></span><br><span class="line">    cv::<span class="built_in">rectangle</span>(map, cv::<span class="built_in">Point</span>(<span class="number">150</span>, <span class="number">100</span>), cv::<span class="built_in">Point</span>(<span class="number">200</span>, <span class="number">400</span>), cv::<span class="built_in">Scalar</span>(<span class="number">0</span>), <span class="number">-1</span>);</span><br><span class="line">    cv::<span class="built_in">rectangle</span>(map, cv::<span class="built_in">Point</span>(<span class="number">300</span>, <span class="number">50</span>), cv::<span class="built_in">Point</span>(<span class="number">350</span>, <span class="number">350</span>), cv::<span class="built_in">Scalar</span>(<span class="number">0</span>), <span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> startX = <span class="number">50</span>, startY = <span class="number">250</span>;</span><br><span class="line">    <span class="type">int</span> goalX = <span class="number">450</span>, goalY = <span class="number">250</span>;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">"Map Size: "</span> &lt;&lt; width &lt;&lt; <span class="string">"x"</span> &lt;&lt; height &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">"Start: ("</span> &lt;&lt; startX &lt;&lt; <span class="string">", "</span> &lt;&lt; startY &lt;&lt; <span class="string">")"</span> &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">"Goal: ("</span> &lt;&lt; goalX &lt;&lt; <span class="string">", "</span> &lt;&lt; goalY &lt;&lt; <span class="string">")"</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="function">DijkstraPlanner <span class="title">planner</span><span class="params">(map)</span></span>;</span><br><span class="line">    std::vector&lt;std::pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt; path = planner.<span class="built_in">findPath</span>(startX, startY, goalX, goalY);</span><br><span class="line"></span><br><span class="line">    cv::Mat result_img;</span><br><span class="line">    cv::<span class="built_in">cvtColor</span>(map, result_img, cv::COLOR_GRAY2BGR);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (path.<span class="built_in">empty</span>())</span><br><span class="line">    {</span><br><span class="line">        std::cout &lt;&lt; <span class="string">"æœªæ‰¾åˆ°è·¯å¾„!"</span> &lt;&lt; std::endl;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    {</span><br><span class="line">        std::cout &lt;&lt; <span class="string">"æ‰¾åˆ°è·¯å¾„, é•¿åº¦: "</span> &lt;&lt; path.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; path.<span class="built_in">size</span>() - <span class="number">1</span>; ++i)</span><br><span class="line">        {</span><br><span class="line">            <span class="function">cv::Point <span class="title">p1</span><span class="params">(path[i].first, path[i].second)</span></span>;</span><br><span class="line">            <span class="function">cv::Point <span class="title">p2</span><span class="params">(path[i<span class="number">+1</span>].first, path[i<span class="number">+1</span>].second)</span></span>;</span><br><span class="line">            cv::<span class="built_in">line</span>(result_img, p1, p2, cv::<span class="built_in">Scalar</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    cv::<span class="built_in">circle</span>(result_img, cv::<span class="built_in">Point</span>(startX, startY), <span class="number">8</span>, cv::<span class="built_in">Scalar</span>(<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">-1</span>);</span><br><span class="line">    cv::<span class="built_in">circle</span>(result_img, cv::<span class="built_in">Point</span>(goalX, goalY), <span class="number">8</span>, cv::<span class="built_in">Scalar</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">    cv::<span class="built_in">imshow</span>(<span class="string">"Dijkstra Result"</span>, result_img);</span><br><span class="line">    cv::<span class="built_in">waitKey</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<center>
<a href="Dijkstra.jpeg" class="gallery-item" style="box-shadow: none;"> <img src="Dijkstra.jpeg" width="50%"></a>
</center>
</div>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2025-12-05</span>
            
                <span>è¯¥ç¯‡æ–‡ç« è¢« Stocks yuan</span>
            
            
                <span>æ‰“ä¸Šæ ‡ç­¾:
                    
                    
                        <a href='/tags/%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/'>
                            è·¯å¾„è§„åˆ’
                        </a>
                    
                </span>
             
             
                <span>å½’ä¸ºåˆ†ç±»:
                    
                    
                        <a href='/categories/%E7%A7%BB%E5%8A%A8%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%BF%90%E5%8A%A8%E8%A7%84%E5%88%92/'>
                            ç§»åŠ¨æœºå™¨äººè¿åŠ¨è§„åˆ’
                        </a>
                    
                </span>
            
        
        </i>
    </div>
    <br>
    
    
        
            
    
            <div class="post-footer-pre-next">
                
                    <span>ä¸Šä¸€ç¯‡ï¼š<a href='/2025/12/09/JPS%E7%AE%97%E6%B3%95/'>åŸºäºæœç´¢çš„è·¯å¾„è§„åˆ’â€”â€”JPSç®—æ³•</a></span>
                

                
                    <span class="post-footer-pre-next-last-span-right">ä¸‹ä¸€ç¯‡ï¼š<a href="/2025/12/04/Dijkstra%E7%AE%97%E6%B3%95/">åŸºäºæœç´¢çš„è·¯å¾„è§„åˆ’â€”â€”Dijkstraç®—æ³•</a>
                    </span>
                
            </div>
    
        
    

    
        

     
</div>




                    

                    <div class="footer">
    
        <span> 
            Â© 2025 stocks-yuan 

            
                

            
        </span>
       
    
</div>



<!--è¿™æ˜¯æŒ‡ä¸€æ¡çº¿å¾€ä¸‹çš„å†…å®¹-->
<div class="footer-last">
    
            <span>ğŸŒŠçœ‹è¿‡å¤§æµ·çš„äººä¸ä¼šå¿˜è®°æµ·çš„å¹¿é˜”ğŸŒŠ</span>
            
                <span class="footer-last-span-right"><i>æœ¬ç«™ç”±<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>é©±åŠ¨ï½œä½¿ç”¨<a target="_blank" rel="noopener" href="https://github.com/HiNinoJay/hexo-theme-A4">Hexo-theme-A4</a>ä¸»é¢˜</i></span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--ç›®å½•-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--å›åˆ°é¡¶éƒ¨æŒ‰é’®-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery/lightgallery.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-autoplay.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-zoom.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-rotate.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-paper.umd.min.js"></script>




<script type="text/javascript">
     
    if (typeof lightGallery !== "undefined") {
        var options1 = {
            selector: '.gallery-item',
            plugins: [lgThumbnail, lgFullscreen, lgAutoplay, lgZoom, lgRotate, lgPager], // å¯ç”¨æ’ä»¶
            thumbnail: true,          // æ˜¾ç¤ºç¼©ç•¥å›¾
            zoom: true,               // å¯ç”¨ç¼©æ”¾åŠŸ
            rotate: true,             // å¯ç”¨æ—‹è½¬åŠŸèƒ½èƒ½
            autoplay: true,        // å¯ç”¨è‡ªåŠ¨æ’­æ”¾åŠŸèƒ½
            fullScreen: true,      // å¯ç”¨å…¨å±åŠŸèƒ½
            pager: false, //é¡µç ,
            zoomFromOrigin: true,   // ä»åŸå§‹ä½ç½®ç¼©æ”¾
            actualSize: true,       // å¯ç”¨æŸ¥çœ‹å®é™…å¤§å°çš„åŠŸèƒ½
            enableZoomAfter: 300,    // å»¶è¿Ÿç¼©æ”¾ï¼Œç¡®ä¿å›¾ç‰‡åŠ è½½å®Œæˆåå¯ç¼©æ”¾
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1); // ä¿®å¤é€‰æ‹©å™¨
    }
    
</script>


    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> 

                </div>
            
            
                <!-- å›åˆ°é¡¶éƒ¨çš„æŒ‰é’®-->
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- è¿”å›çš„æŒ‰é’®-->
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>
</html>
<script src="/js/emojiHandler.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        wrapEmojis('.paper');
    });
</script>
